<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <title>教育部因材網0033</title>
    <meta http-equiv="content-language" content="zh-tw">
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,user-scalable=yes,maximum-scale=5.0,minimum-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico" />


    <!-- style -->
    <!-- 身分 -->
    <link id="cssFile" rel="stylesheet" type="text/css" href="css/student_root.css?ver=20240517012835" />
    <!-- 重設 -->
    <link rel="stylesheet" type="text/css" href="css/normalize.css?ver=20240517012835" />
    <!-- adl -->
    <link rel="stylesheet" type="text/css" href="css/adl.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="css/adluser.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="css/adlcomponent.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="css/adlplugin.css?ver=20240517012835" />
    <!-- 套件 -->
    <link rel="stylesheet" type="text/css" href="js/colorPick/colorPicker.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="css/iziModal.css?ver=20240517012835" /><!-- 問題回報 -->
    <link rel="stylesheet" type="text/css" href="scripts/venobox/venobox.css?ver=20240517012835" media="screen" />
    <link rel="stylesheet" type="text/css" href="scripts/sweetalert.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="scripts/sweetalert2/sweetalert2.min.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="css/main.min.css?ver=20240517012835" /><!-- FullCalendar -->
    <!-- <link rel="stylesheet" type="text/css" href="node_modules/vue-multiselect/dist/vue-multiselect.css?ver=20240517012835" /> -->
    <link rel="stylesheet" href="css/jquery-ui.css?ver=20240517012835" />
    <link rel="stylesheet" type="text/css" href="css/conversational_robot.css">

    <!-- script -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-N8MCXTXN"></script>
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KV6JP68J"></script> -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-07X29V013K"></script>
    <script src="scripts/gtm.js?ver=20240517012835"></script>

    <script src="scripts/jquery-3.6.1.min.ob.js?ver=20240517012835"></script>
    <!-- adl -->
    <script src="scripts/function.js?ver=20240517012835"></script>
    <script src="js/customStyle_function.js?ver=20240517012835"></script>
    <!-- 套件 -->
    <script src="js/colorPick/jquery.colorPicker.js?ver=20240517012835"></script>
    <script src="js/drawPad.js?ver=20240517012835"></script>
    <script src="scripts/jquery.tipsy.js?ver=20240517012835"></script><!-- tooltips套件 -->
    <script src="scripts/loadingoverlay.min.js?ver=20240517012835"></script><!-- 讀取轉圈圈 -->
    <script src="scripts/sortable.min.js?ver=20240517012835"></script><!-- 更改排序套件 -->
    <script src="scripts/iziModal.js?ver=1.6.0"></script><!-- 彈跳視窗1 問題回報視窗-->
    <script src="scripts/sweetalert.min.js?ver=20240517012835"></script><!-- 彈跳視窗2 -->
    <script src="scripts/axios/1.2.2/axios.min.js"></script><!-- simple ajax -->
    <script src="scripts/jquery-ui.js?ver=1.12.1"></script>
    <script src="scripts/customer.js?ver=20240517012835"></script>
    <script src="scripts/html2canvas.js?ver=1.0.0-rc.1"></script><!-- 截圖套件 -->
    <script src="scripts/chartjs.min.js?ver=20240517012835"></script>
    <script src="scripts/venobox/venobox.min.js?ver=180514"></script><!-- 彈跳視窗3 -->
    <script src="scripts/main.min.js?ver=20240517012835"></script>
    <script src="scripts/moment.min.js?ver=20240517012835"></script>
    <script src="scripts/rotate.js?ver=20240517012835"></script>
    <script src="node_modules/vue/dist/vue.global.prod.js"></script>
    <script src="node_modules/vue-router/dist/vue-router.global.prod.js"></script>
    <!-- <script src="node_modules/vue-multiselect/dist/vue-multiselect.js"></script> -->
    <!-- <script src="node_modules/sortablejs/Sortable.min.js"></script> -->
    <!-- <script src="node_modules/vuedraggable/dist/vuedraggable.umd.min.js"></script> -->
    <script src="node_modules/hammerjs/hammer.min.js?ver=20240517012835"></script>

    <style>
        .robotBtn {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 999;
            width: 75px;
            height: 75px;
            background-image: url("images/adl_chat_robot.png");
            background-size: 90px;
            background-repeat: no-repeat;
            background-position: top;
        }

        .robotBtn.disableBtn {
            -webkit-filter: grayscale(1);
        }

        .robotBtn.disableBtn:hover,
        .robotBtn.disableBtn:active {
            background-color: unset;
        }

        .chatWrap {
            display: none;
        }
    </style>
</head>

<body>
    <header>
        <ul>
            <li class="menubtn">
                <i class="fas fa-bars"></i>
            </li>
            <li class="logo">
                <a href="HomePage/home/index.php"><img src="images/logo1.png" /></a>
            </li>
            <li>
            </li>
            <li class="empty"></li>
            <li class="manualblock">
                <button class="btn" onclick="window.open('HomePage/webinfo/?id=4')"><sup style="color:#ee5b5b;">NEW</sup> 操作介紹</button>
            </li>
            <li class="coursesoverviewblock">
                <div class="toolTip">
                    <button class="btn">課程總覽</button>
                    <div class="toolTipText">
                        <style>
                            li.coursesoverviewblock>.toolTip>.toolTipText {
                                max-height: 92vh !important;
                                overflow: hidden !important;
                            }

                            .course-main {
                                width: 100%;
                                border-radius: 10px;
                                min-height: 67vh;
                                max-height: 79vh;
                                overflow: auto;
                            }

                            .course-center>div {
                                padding-left: 10px;
                            }

                            .course-right {
                                padding-left: 10px;
                            }

                            .course-main>div {
                                margin: 0;
                                border-right: 1px solid #AAA;
                                padding: 0 20px;
                                flex: 1;
                            }

                            .course-main>div:last-child {
                                border-right: 0;
                            }

                            .flex {
                                display: flex;
                                flex-wrap: wrap;
                            }

                            .textAl {
                                color: white;
                                font-size: 1.2rem;
                                background-color: var(--main-gloomy);
                                border-radius: 8px 8px 0 0;
                                padding: 10px 20px;
                                /* margin: 0 20px; */
                            }

                            .across-step-font {
                                background-color: var(--main-gloomy);
                                color: #fff;
                                margin: 0 15px;
                                padding: 5px 8px;
                                font-size: 1.12rem;
                            }

                            .materialList dt {
                                color: var(--main-gloomy);
                                font-weight: bold;
                                padding-bottom: 5px;
                                margin-bottom: 5px;
                            }

                            .materialList dd {
                                /* 與function的偵測視窗大小有關聯，修改時要注意 */
                                margin-bottom: 10px;
                            }

                            .materialList a {
                                text-decoration: none;
                                margin: 5px;
                                display: inline-block;
                            }

                            @media screen and (max-width: 414px) {
                                .materialList.displayFlex {
                                    display: block;
                                }

                                .course-main>div {
                                    border-right: 0;
                                    border-bottom: 1px solid #AAA;
                                }

                                .materialList dl {
                                    max-width: auto;
                                    width: 100%;
                                }

                            }

                            #toolTip>div.toolTipText {
                                height: calc(100vh - 100%);
                                max-height: 100vh;
                            }

                            .menu-header {
                                border-bottom: 3px solid var(--main-light);
                                padding: 5px 25px;
                            }

                            .menu-footer {
                                width: 100%;
                                padding: 10px 5px;
                                border-top: 3px solid var(--main-light);
                                display: none;
                            }

                            .menu-footer .menu-list {
                                display: flex;
                                justify-content: space-between;
                            }

                            .menu-footer .menu-list li {
                                width: unset;
                                white-space: nowrap;
                                padding: 10px 3%;
                            }

                            .menu-list {
                                justify-content: center;
                            }

                            .menu-list li {
                                display: block;
                                text-decoration: none;
                                font-weight: 700;
                                color: var(--main-dark);
                                padding: 0.4em 0.8em;
                                cursor: pointer;
                                font-size: 23px;
                                border-radius: 5pt;
                                white-space: nowrap;
                            }

                            .menu-list li.active {
                                color: var(--main-bright);
                                background-color: var(--main-gloomy);
                            }

                            .menu-list a {
                                display: block;
                                text-decoration: none;
                                font-weight: 700;
                                color: #ea7070;
                                padding: 1em;
                            }

                            .menu-list a:hover {
                                color: #4bc2c5;
                            }

                            .menu-container {
                                counter-reset: item;
                                display: grid;
                                gap: 10px;
                                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                                grid-auto-flow: dense;
                                justify-items: center;
                                align-items: start;
                                background-color: var(--main-bright);
                                padding: 20px 15px;
                                border-radius: 0 0 8px 8px;
                            }

                            .menu-container-new {
                                background-color: var(--main-bright);
                                padding: 15px 15px;
                                border-radius: 8px;
                            }

                            .menu-item {
                                counter-increment: item;
                                grid-column-start: auto;
                                grid-row-start: auto;
                                background-size: cover;
                                background-position: center;
                                background-repeat: no-repeat;
                                width: 100%;
                            }

                            .menu-item>div {
                                background-color: var(--main-bright);
                                border-radius: 0 20px 10px 10px;
                                padding: 15px;
                            }

                            p.hesparea {
                                color: var(--main-gloomy);
                                font-weight: bold;
                                border-bottom: 2px solid white;
                                padding-bottom: 5px;
                                margin-bottom: 5px;
                            }

                            p.hesparea:not(:first-child) {
                                margin-top: 10px;
                            }

                            @media screen and (max-width: 561px) {
                                .menu-header {
                                    display: none;
                                }

                                .menu-footer {
                                    display: block;
                                }

                                .menu-footer .menu-sub ul {
                                    columns: 1;
                                    -webkit-columns: 1;
                                    -moz-columns: 1;
                                }

                                .course-main {
                                    max-height: 64vh;
                                }
                            }

                            @media screen and (min-width: 890px) {
                                .menu-list li:first-child {}

                                .menu-list li {
                                    display: inline-block;
                                }

                                .course-main ul {
                                    columns: 3;
                                    -webkit-columns: 3;
                                    -moz-columns: 3;
                                }
                            }

                            @media screen and (max-width: 890px) and (min-width: 500px) {
                                .menu-list li {
                                    text-align: center;
                                    padding: 3px;
                                }

                                .menu-sub ul {
                                    -webkit-columns: 4;
                                }

                                .menu-list a {
                                    padding: 3px;
                                }

                            }

                            @media screen and (max-width: 890px) and (min-width: 561px) {
                                .course-main {
                                    max-height: 76vh;
                                }
                            }

                            @media screen and (max-width: 500px) {
                                .menu-list li {
                                    text-align: center;
                                    width: 100px;
                                    margin-top: 2px;
                                    margin-bottom: 2px;
                                    padding: 3px;
                                }

                                .menu-sub ul {
                                    columns: 3;
                                    -webkit-columns: 3;
                                    -moz-columns: 3;
                                }

                                .menu-list a {
                                    padding: 3px;
                                }
                            }

                            #HESPList dd {
                                display: none;
                            }

                            .zooms {
                                cursor: pointer;
                            }

                            .course-main dl {
                                width: 100%;
                            }

                            .materialList dt:not(.zooms) {
                                border-bottom: solid 1px;
                            }

                            dt.hespcourse {
                                color: var(--main-active);
                                margin-top: 10px;
                            }

                            dd.tvedb {
                                border-top: 1px solid var(--main-gloomy);
                                padding-top: 5px;
                            }

                            .menu-container-all>.category {
                                /* margin-top的20px與resize記算高教下面空白DIV有關係，修改時請注意 */
                                background-color: var(--main-bright);
                                margin-top: 20px;
                            }
                        </style>
                        <div class="menu-header clearfix">
                            <div class="menu-sub clearfix">
                                <ul class="menu-list clearfix" id="clickt">
                                    <li class="elementaryList" id="#elementaryList">國小</a></li>
                                    <li class="secondaryList" id="#secondaryList">國中</a></li>
                                    <li class="highList" id="#highList">普高</a></li>
                                    <li class="tvedbList" id="#tvedbList">技高</a></li>
                                    <li class="examList" id="#examList">大考</a></li>
                                    <li class="issueList" id="#issueList">議題/素養</a></li>
                                    <li class="specialList" id="#specialList">特色專區</a></li>
                                    <li class="HESPList" id="#HESPList">高教</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="course-main materialList">
                            <div class="menu-container-all">
                                <div class="category" id="elementaryList">
                                    <h2 class="textAl">國小</h2>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>一年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=1">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=1">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=1">體育</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>二年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=2">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=2">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=2">體育</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>三年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=3">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=3">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=3&subsubject=4&grade=3">自然科學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=3">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=120&grade=3">資訊教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=3">體育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=147&grade=3">音樂</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=151&grade=3">視覺藝術</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=143&grade=3">表演藝術</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>四年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=4">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=4">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=3&subsubject=4&grade=4">自然科學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=4">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=120&grade=4">資訊教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=4">體育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=147&grade=4">音樂</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=151&grade=4">視覺藝術</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=143&grade=4">表演藝術</a>

                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>五年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=5">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=5">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=3&subsubject=4&grade=5">自然科學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=5">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=120&grade=5">資訊教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=5">體育</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>六年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=6">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=6">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=3&subsubject=4&grade=6">自然科學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=6">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=120&grade=6">資訊教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=6">體育</a>
                                            </dd>
                                        </dl>
                                    </div>
                                    <h3 class="across-step-font">跨階段</h3>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>素養專區</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=27&category=1">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=1">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=29&category=1">自然科學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=1"
                                                    rel="noopener noreferrer">對話式數學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=5"
                                                    rel="noopener noreferrer">對話式語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=21cps&file=coreLiteracyIntroduction">21世紀核心素養</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>課綱議題</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=交通安全&subject=168&stage=1">交通安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=水域安全&subject=145">水域安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=防災教育&subject=153">防災教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=環境教育&subject=159">環境教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=文化教育&subject=158">文化教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=能源議題&subject=136">能源議題</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋與環境&subject=146">海洋與環境</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋教育議題&subject=152">海洋教育</a>
                                                <a href="https://mkm.k12ea.gov.tw/textbook" target="_blank"
                                                    rel="noopener noreferrer">新住民教材</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>主題教材</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=植樹教材&subject=121">植樹教材</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=美力台灣&subject=135">美力台灣</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=LIS自然&subject=150">LIS自然</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=看見系列&subject=166">看見系列</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=雙語藝術&subject=161">雙語藝術</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=日文&subject=43">日文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=自主學習&subject=48">自主學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=科博館探究&subject=169">科博館探究</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資訊科技</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=2">數學運算思維</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=人工智慧&subject=127">人工智慧</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=77&category=2">程式設計</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=54">資訊素養</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=Python與AI數位學習&subject=137">Python與AI數位學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=157">程式教育在E-game</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>遊戲式學習</dt>
                                            <dd>
                                                <a href="./games/planting/index">守護木林森</a>
                                                <a href="./games/game_base_learning/index">因雄崛起</a>
                                                <a href="./games/egame/index" target="_blank"
                                                    rel="noopener noreferrer">E-game</a>
                                                <a href="https://apps.apple.com/tw/app/%E8%99%9B%E6%93%AC%E5%81%B5%E6%8E%A2%E7%A4%BE/id6449760992"
                                                    target="_blank" rel="noopener noreferrer">虛擬偵探社</a>
                                                <a href="https://adl.edu.tw/mathgame/" target="_blank"
                                                    rel="noopener noreferrer">速戰數決</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>互動學習</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=physics_interactive&subject=29">物理模擬</a>
                                                <a href="laboratory/math/index.html" target="_blank">數學實驗室</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=concept_its&subject=77">運算思維</a>
                                                <a href="https://market.cloud.edu.tw/list/arvr.jsp" target="_blank"
                                                    rel="noopener noreferrer">VR / AR</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資源服務</dt>
                                            <dd>
                                                <a href="https://oidcebook.nlpi.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">教育雲電子書</a>
                                                <a href="https://www.nmth.gov.tw/digitalresource?uid=312"
                                                    target="_blank" rel="noopener noreferrer">數位臺史博</a>
                                                <a href="https://nclibtv.ncl.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">國圖到你家</a>
                                                <a href="https://ed.arte.gov.tw/ch/content/m_108syllabus_list_1.aspx"
                                                    target="_blank" rel="noopener noreferrer">藝術教育網</a>
                                                <a href="https://mhi.moe.edu.tw/eduCloud/learning-resource/"
                                                    target="_blank" rel="noopener noreferrer">本土數位教材專區</a>
                                                <a href="https://www.nmns.arplanets.com/categories/c108" target="_blank"
                                                    rel="noopener noreferrer">科宇宙悠遊學</a>
                                                <a href="https://hakkadict.moe.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">客語辭典</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>活動專區</dt>
                                            <dd>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RVRNPQ&contest_code=QWpNR2F5WnlNcDVXTVhaPQ"
                                                    target="_blank" rel="noopener noreferrer">E時代字音字形大挑戰</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RXpNPQ&contest_code=QWpNV1l5WHkwMGgyPVFSPQ"
                                                    target="_blank" rel="noopener noreferrer">數學素養題挑戰賽(國小)</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RXpOPQ&contest_code=QWpNbWJ5YXpVbnhXTUhhPQ"
                                                    target="_blank" rel="noopener noreferrer">跟著小鷹阿柴遊臺灣</a>
                                            </dd>
                                        </dl>
                                    </div>
                                </div>

                                <div class="category" id="secondaryList">
                                    <h2 class="textAl">國中</h2>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>七年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=7">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=7">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=7">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subsubject=2&grade=7">生物(暫綱)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=3&grade=7">生物(108課綱)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=144&grade=7">地理</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=156&grade=7">資訊科技</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=7">健康與體育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=147&grade=7">音樂</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=151&grade=7">視覺藝術</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=143&grade=7">表演藝術</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>八年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=8">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=8">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=8">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subsubject=1&grade=8">理化</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=144&grade=8">地理</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=147&grade=8">音樂</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=8">體育</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>九年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=9">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=9">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=9">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subsubject=1&grade=9">理化</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=165&grade=9">地球科學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=147&grade=9">音樂</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=155&grade=9">體育</a>
                                            </dd>
                                        </dl>
                                    </div>
                                    <h3 class="across-step-font">跨階段</h3>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>素養專區</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=27&category=1">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=1">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=29&category=1">自然科學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=1"
                                                    rel="noopener noreferrer">對話式數學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=5"
                                                    rel="noopener noreferrer">對話式語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=21cps&file=coreLiteracyIntroduction">21世紀核心素養</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>課綱議題</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=交通安全&subject=168&stage=1">交通安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=水域安全&subject=145">水域安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=防災教育&subject=153">防災教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=環境教育&subject=159">環境教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=文化教育&subject=158">文化教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=能源議題&subject=136">能源議題</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋與環境&subject=146">海洋與環境</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋教育議題&subject=152">海洋教育</a>
                                                <a href="https://mkm.k12ea.gov.tw/textbook" target="_blank"
                                                    rel="noopener noreferrer">新住民教材</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>主題教材</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=植樹教材&subject=121">植樹教材</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=美力台灣&subject=135">美力台灣</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=LIS自然&subject=150">LIS自然</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=自主學習&subject=48">自主學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=日文&subject=43">日文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=科博館探究&subject=169">科博館探究</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資訊科技</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=2">數學運算思維</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=人工智慧&subject=127">人工智慧</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=77&category=2">程式設計</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=54">資訊素養</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=Python與AI數位學習&subject=137">Python與AI數位學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=157">程式教育在E-game</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>遊戲式學習</dt>
                                            <dd>
                                                <a href="./games/planting/index">守護木林森</a>
                                                <a href="./games/game_base_learning/index">因雄崛起</a>
                                                <a href="./games/egame/index" target="_blank"
                                                    rel="noopener noreferrer">E-game</a>
                                                <a href="https://apps.apple.com/tw/app/%E8%99%9B%E6%93%AC%E5%81%B5%E6%8E%A2%E7%A4%BE/id6449760992"
                                                    target="_blank" rel="noopener noreferrer">虛擬偵探社</a>
                                                <a href="https://adl.edu.tw/mathgame/" target="_blank"
                                                    rel="noopener noreferrer">速戰數決</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>互動學習</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=physics_interactive&subject=29">物理模擬</a>
                                                <a href="laboratory/math/index.html" target="_blank">數學實驗室</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=concept_its&subject=77">運算思維</a>
                                                <a href="https://market.cloud.edu.tw/list/arvr.jsp" target="_blank"
                                                    rel="noopener noreferrer">VR / AR</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資源服務</dt>
                                            <dd>
                                                <a href="https://oidcebook.nlpi.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">教育雲電子書</a>
                                                <a href="https://www.nmth.gov.tw/digitalresource?uid=312"
                                                    target="_blank" rel="noopener noreferrer">數位臺史博</a>
                                                <a href="https://nclibtv.ncl.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">國圖到你家</a>
                                                <a href="https://ed.arte.gov.tw/ch/content/m_108syllabus_list_1.aspx"
                                                    target="_blank" rel="noopener noreferrer">藝術教育網</a>
                                                <a href="https://mhi.moe.edu.tw/eduCloud/learning-resource/"
                                                    target="_blank" rel="noopener noreferrer">本土數位教材專區</a>
                                                <a href="https://www.nmns.arplanets.com/categories/c108" target="_blank"
                                                    rel="noopener noreferrer">科宇宙悠遊學</a>
                                                <a href="https://hakkadict.moe.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">客語辭典</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>活動專區</dt>
                                            <dd>
                                                <a href="contest/2021summer/info" target="_blank"
                                                    rel="noopener noreferrer">挑戰一夏</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RUROPQ&contest_code=QWpNV1l5WHkwMGgyPWdTPQ"
                                                    target="_blank" rel="noopener noreferrer">數學素養題挑戰賽(國中)</a>
                                            </dd>
                                        </dl>
                                    </div>
                                </div>

                                <div class="category" id="highList">
                                    <h2 class="textAl">普通型高中</h2>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>十年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=10">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=10">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=10">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=131&grade=10">生物(必修)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=133&grade=10">化學(必修)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=3&grade=10">物理(必修)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=156&grade=10">資訊科技</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>十一年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=11">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=11">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=11">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=131&grade=11">生物(選修一、二)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=133&grade=11">化學(選修)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=119&grade=11">物理(選修)</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>十二年級</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=1&grade=12">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=12">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=12">英語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=131&grade=12">生物(選修三、四)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=133&grade=12">化學(選修)</a>
                                            </dd>
                                        </dl>
                                    </div>
                                    <h3 class="across-step-font">跨階段</h3>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>素養專區</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=27&category=1">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=1">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=29&category=1">自然科學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=1"
                                                    rel="noopener noreferrer">對話式數學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=5"
                                                    rel="noopener noreferrer">對話式語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=21cps&file=coreLiteracyIntroduction">21世紀核心素養</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>課綱議題</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=交通安全&subject=168&stage=5">交通安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=水域安全&subject=145">水域安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=防災教育&subject=153">防災教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=環境教育&subject=159">環境教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=文化教育&subject=158">文化教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋與環境&subject=146">海洋與環境</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋教育議題&subject=152">海洋教育</a>
                                                <a href="https://mkm.k12ea.gov.tw/textbook" target="_blank"
                                                    rel="noopener noreferrer">新住民教材</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>主題教材</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=植樹教材&subject=121">植樹教材</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=美力台灣&subject=135">美力台灣</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=LIS自然&subject=150">LIS自然</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=自主學習&subject=48">自主學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=日文&subject=43">日文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=科博館探究&subject=169">科博館探究</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資訊科技</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=2">數學運算思維</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=人工智慧&subject=127">人工智慧</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=77&category=2">程式設計</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=54">資訊素養</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=Python與AI數位學習&subject=137">Python與AI數位學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=134">資通安全實務</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>遊戲式學習</dt>
                                            <dd>
                                                <a href="./games/planting/index">守護木林森</a>
                                                <a href="./games/game_base_learning/index">因雄崛起</a>
                                                <a href="./games/egame/index" target="_blank"
                                                    rel="noopener noreferrer">E-game</a>
                                                <a href="./games/sdgs/index">飛英任務</a>
                                                <a href="https://apps.apple.com/tw/app/%E8%99%9B%E6%93%AC%E5%81%B5%E6%8E%A2%E7%A4%BE/id6449760992"
                                                    target="_blank" rel="noopener noreferrer">虛擬偵探社</a>
                                                <a href="https://adl.edu.tw/mathgame/" target="_blank"
                                                    rel="noopener noreferrer">速戰數決</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>互動學習</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=physics_interactive&subject=29">物理模擬</a>
                                                <a href="laboratory/math/index.html" target="_blank">數學實驗室</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=concept_its&subject=77">運算思維</a>
                                                <a href="https://market.cloud.edu.tw/list/arvr.jsp" target="_blank"
                                                    rel="noopener noreferrer">VR / AR</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資源服務</dt>
                                            <dd>
                                                <a href="https://oidcebook.nlpi.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">教育雲電子書</a>
                                                <a href="https://www.nmth.gov.tw/digitalresource?uid=312"
                                                    target="_blank" rel="noopener noreferrer">數位臺史博</a>
                                                <a href="https://nclibtv.ncl.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">國圖到你家</a>
                                                <a href="https://ed.arte.gov.tw/ch/content/m_108syllabus_list_1.aspx"
                                                    target="_blank" rel="noopener noreferrer">藝術教育網</a>
                                                <a href="https://mhi.moe.edu.tw/eduCloud/learning-resource/"
                                                    target="_blank" rel="noopener noreferrer">本土數位教材專區</a>
                                                <a href="https://sdl.ntl.edu.tw" target="_blank"
                                                    rel="noopener noreferrer">高中自主學習網</a>
                                                <a href="https://www.nmns.arplanets.com/categories/c108" target="_blank"
                                                    rel="noopener noreferrer">科宇宙悠遊學</a>
                                                <a href="https://hakkadict.moe.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">客語辭典</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>活動專區</dt>
                                            <dd>
                                                <a href="contest/2021mathscience/info" target="_blank"
                                                    rel="noopener noreferrer">人機互動挑戰數理王</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RVROPQ&contest_code=QWpNV1l5Y3owMGgybFdaV1pqdU4"
                                                    target="_blank" rel="noopener noreferrer">第2屆人機互動挑戰數理王</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RURPPQ&contest_code=QWpNV1l5YzAwMGgybFdaV1pqdU4"
                                                    target="_blank" rel="noopener noreferrer">人機互動 數理同樂</a>
                                            </dd>
                                        </dl>
                                    </div>
                                </div>

                                <div class="category" id="tvedbList">
                                    <h2 class="textAl">技術型高中</h2>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>共同科目</dt>
                                            <dd>
                                                <!--a href="">數學A</a-->
                                                <!--a href="">數學B</a-->
                                                <!--a href="">數學C</a-->
                                                <!--a href="">化學A</a-->
                                                <!--a href="">化學B</a-->
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=10">英語文(十)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=11">英語文(十一)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=4&grade=12">英語文(十二)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=132&grade=10">生物(A)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=125&grade=10">物理(A)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=126&grade=10">物理(B)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=171&grade=10">普通化學(十)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=10&publisher=52">數學(A)(十)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=10&publisher=53">數學(B)(十)</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=2&grade=10&publisher=54">數學(C)(十)</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>電機與電子群</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=138&grade=10">基本電學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=140&grade=11">數位邏輯設計</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=142&grade=11">電工機械</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks	_viewlist_new&subject=139&grade=11">電子學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=141&grade=11">微處理機</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                        </dl>
                                    </div>
                                    <h3 class="across-step-font">跨階段</h3>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>素養專區</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=27&category=1">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=1">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=29&category=1">自然科學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=1"
                                                    rel="noopener noreferrer">對話式數學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=5"
                                                    rel="noopener noreferrer">對話式語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=21cps&file=coreLiteracyIntroduction">21世紀核心素養</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>課綱議題</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=交通安全&subject=168&stage=5">交通安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=水域安全&subject=145">水域安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=防災教育&subject=153">防災教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=環境教育&subject=159">環境教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=文化教育&subject=158">文化教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋與環境&subject=146">海洋與環境</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋教育議題&subject=152">海洋教育</a>
                                                <a href="https://mkm.k12ea.gov.tw/textbook" target="_blank"
                                                    rel="noopener noreferrer">新住民教材</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>主題教材</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=植樹教材&subject=121">植樹教材</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=美力台灣&subject=135">美力台灣</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=LIS自然&subject=150">LIS自然</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=自主學習&subject=48">自主學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=日文&subject=43">日文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=科博館探究&subject=169">科博館探究</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資訊科技</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=2">數學運算思維</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=人工智慧&subject=127">人工智慧</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=77&category=2">程式設計</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=54">資訊素養</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=Python與AI數位學習&subject=137">Python與AI數位學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=134">資通安全實務</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>遊戲式學習</dt>
                                            <dd>
                                                <a href="./games/planting/index">守護木林森</a>
                                                <a href="./games/game_base_learning/index">因雄崛起</a>
                                                <a href="./games/egame/index" target="_blank"
                                                    rel="noopener noreferrer">E-game</a>
                                                <a href="./games/sdgs/index">飛英任務</a>
                                                <a href="https://apps.apple.com/tw/app/%E8%99%9B%E6%93%AC%E5%81%B5%E6%8E%A2%E7%A4%BE/id6449760992"
                                                    target="_blank" rel="noopener noreferrer">虛擬偵探社</a>
                                                <a href="https://adl.edu.tw/mathgame/" target="_blank"
                                                    rel="noopener noreferrer">速戰數決</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>互動學習</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=physics_interactive&subject=29">物理模擬</a>
                                                <a href="laboratory/math/index.html" target="_blank">數學實驗室</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=concept_its&subject=77">運算思維</a>
                                                <a href="https://market.cloud.edu.tw/list/arvr.jsp" target="_blank"
                                                    rel="noopener noreferrer">VR / AR</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資源服務</dt>
                                            <dd>
                                                <a href="https://oidcebook.nlpi.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">教育雲電子書</a>
                                                <a href="https://www.nmth.gov.tw/digitalresource?uid=312"
                                                    target="_blank" rel="noopener noreferrer">數位臺史博</a>
                                                <a href="https://nclibtv.ncl.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">國圖到你家</a>
                                                <a href="https://ed.arte.gov.tw/ch/content/m_108syllabus_list_1.aspx"
                                                    target="_blank" rel="noopener noreferrer">藝術教育網</a>
                                                <a href="https://mhi.moe.edu.tw/eduCloud/learning-resource/"
                                                    target="_blank" rel="noopener noreferrer">本土數位教材專區</a>
                                                <a href="https://sdl.ntl.edu.tw" target="_blank"
                                                    rel="noopener noreferrer">高中自主學習網</a>
                                                <a href="https://www.nmns.arplanets.com/categories/c108" target="_blank"
                                                    rel="noopener noreferrer">科宇宙悠遊學</a>
                                                <a href="https://hakkadict.moe.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">客語辭典</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>活動專區</dt>
                                            <dd>
                                                <a href="contest/2021mathscience/info" target="_blank"
                                                    rel="noopener noreferrer">人機互動挑戰數理王</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RVROPQ&contest_code=QWpNV1l5Y3owMGgybFdaV1pqdU4"
                                                    target="_blank" rel="noopener noreferrer">第2屆人機互動挑戰數理王</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RURPPQ&contest_code=QWpNV1l5YzAwMGgybFdaV1pqdU4"
                                                    target="_blank" rel="noopener noreferrer">人機互動 數理同樂</a>
                                            </dd>
                                        </dl>
                                    </div>
                                </div>

                                <div class="category" id="examList">
                                    <h2 class="textAl">大考專區</h2>
                                    <div class="menu-container-new">
                                        <a
                                            href="modules_new.php?op=modload&name=eduexam&file=useditem&eduexamtype=BAT">學力測驗</a>
                                        <a
                                            href="modules_new.php?op=modload&name=eduexam&file=useditem&eduexamtype=CAP">會考</a>
                                        <a
                                            href="modules_new.php?op=modload&name=eduexam&file=useditem&eduexamtype=GSAT">學測</a>
                                        <a
                                            href="modules_new.php?op=modload&name=eduexam&file=useditem&eduexamtype=AST">指考</a>
                                        <a
                                            href="modules_new.php?op=modload&name=eduexam&file=useditem&eduexamtype=TVE">統測</a>
                                    </div>
                                </div>

                                <div class="category" id="issueList">
                                    <h2 class="textAl">議題/素養</h2>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt>素養專區</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=27&category=1">國語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=1">數學</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=29&category=1">自然科學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=1"
                                                    rel="noopener noreferrer">對話式數學</a>
                                                <a href="https://ctci.ntcu.edu.tw/mathITSbk/index.php?aa=%27.N2F1dG90dXRvcjctaEhOfFpSbzctMDAwMGhITnxaUm8=.%27&aialuid=MTkwMDQxLXVzZXIyMDQ3NTMz&subject=5"
                                                    rel="noopener noreferrer">對話式語文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=21cps&file=coreLiteracyIntroduction">21世紀核心素養</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>課綱議題</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=交通安全&subject=168&stage=1">交通安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=水域安全&subject=145">水域安全</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=防災教育&subject=153">防災教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=環境教育&subject=159">環境教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=文化教育&subject=158">文化教育</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=能源議題&subject=136">能源議題</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋與環境&subject=146">海洋與環境</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=海洋教育議題&subject=152">海洋教育</a>
                                                <a href="https://mkm.k12ea.gov.tw/textbook" target="_blank"
                                                    rel="noopener noreferrer">新住民教材</a>
                                            <dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>主題教材</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=植樹教材&subject=121">植樹教材</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=美力台灣&subject=135">美力台灣</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=LIS自然&subject=150">LIS自然</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=看見系列&subject=166">看見系列</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=雙語藝術&subject=161">雙語藝術</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=日文&subject=43">日文</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=自主學習&subject=48">自主學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&sub=科博館探究&subject=169">科博館探究</a>
                                            <dd>
                                        </dl>
                                    </div>
                                </div>

                                <div class="category" id="specialList">
                                    <h2 class="textAl">特色專區</h2>
                                    <div class="menu-container">
                                        <!-- <dl class="menu-item">
					<dt>知識結構星空圖</dt>
					<dd>
						<a href="modules_new.php?op=modload&name=D3&file=chart&subject=10">國語文</a>
						<a href="modules_new.php?op=modload&name=D3&file=chart&subject=3">數學</a>
						<a href="modules_new.php?op=modload&name=D3&file=chart&subject=34">英語文</a>
						<a href="modules_new.php?op=modload&name=D3&file=chart&subject=4">自然科學</a>
					</dd>
				</dl> -->
                                        <dl class="menu-item">
                                            <dt>資訊科技</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=2&category=2">數學運算思維</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=127">人工智慧</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=77&category=2">程式設計</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=LiteracyMaterial&file=Literacylist&subject=54">資訊素養</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=137">Python與AI數位學習</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=134">資通安全實務</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=157">程式教育在E-game</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>遊戲式學習</dt>
                                            <dd>
                                                <a href="./games/planting/index">守護木林森</a>
                                                <a href="./games/game_base_learning/index">因雄崛起</a>
                                                <a href="./games/egame/index" target="_blank"
                                                    rel="noopener noreferrer">E-game</a>
                                                <a href="./games/sdgs/index">飛英任務</a>
                                                <a href="https://apps.apple.com/tw/app/%E8%99%9B%E6%93%AC%E5%81%B5%E6%8E%A2%E7%A4%BE/id6449760992"
                                                    target="_blank" rel="noopener noreferrer">虛擬偵探社</a>
                                                <a href="https://adl.edu.tw/mathgame/" target="_blank"
                                                    rel="noopener noreferrer">速戰數決</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>互動學習</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=physics_interactive&subject=29">物理模擬</a>
                                                <a href="laboratory/math/index.html" target="_blank">數學實驗室</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignCR&file=assignCR_list&type=concept_its&subject=77">運算思維</a>
                                                <a href="https://market.cloud.edu.tw/list/arvr.jsp" target="_blank"
                                                    rel="noopener noreferrer">VR / AR</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>資源服務</dt>
                                            <dd>
                                                <a href="https://oidcebook.nlpi.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">教育雲電子書</a>
                                                <a href="https://www.nmth.gov.tw/digitalresource?uid=312"
                                                    target="_blank" rel="noopener noreferrer">數位臺史博</a>
                                                <a href="https://nclibtv.ncl.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">國圖到你家</a>
                                                <a href="https://ed.arte.gov.tw/ch/content/m_108syllabus_list_1.aspx"
                                                    target="_blank" rel="noopener noreferrer">藝術教育網</a>
                                                <a href="https://mhi.moe.edu.tw/eduCloud/learning-resource/"
                                                    target="_blank" rel="noopener noreferrer">本土數位教材專區</a>
                                                <a href="https://sdl.ntl.edu.tw" target="_blank"
                                                    rel="noopener noreferrer">高中自主學習網</a>
                                                <a href="https://www.nmns.arplanets.com/categories/c108" target="_blank"
                                                    rel="noopener noreferrer">科宇宙悠遊學</a>
                                                <a href="https://hakkadict.moe.edu.tw/" target="_blank"
                                                    rel="noopener noreferrer">客語辭典</a>
                                            </dd>
                                        </dl>
                                        <!-- <dl class="menu-item">
					<dt>通用課程</dt>
					<dd>
						<a href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=5&grade=10">日文</a>
						<a href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subjectG=8&grade=1">自主學習</a>
					</dd>
				</dl> -->
                                        <dl class="menu-item">
                                            <dt>活動專區</dt>
                                            <dd>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RVRNPQ&contest_code=QWpNR2F5WnlNcDVXTVhaPQ"
                                                    target="_blank" rel="noopener noreferrer">E時代字音字形大挑戰</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RXpNPQ&contest_code=QWpNV1l5WHkwMGgyPVFSPQ"
                                                    target="_blank" rel="noopener noreferrer">數學素養題挑戰賽(國小)</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RXpOPQ&contest_code=QWpNbWJ5YXpVbnhXTUhhPQ"
                                                    target="_blank" rel="noopener noreferrer">跟著小鷹阿柴遊臺灣</a>
                                                <a href="contest/2021summer/info" target="_blank"
                                                    rel="noopener noreferrer">挑戰一夏</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RUROPQ&contest_code=QWpNV1l5WHkwMGgyPWdTPQ"
                                                    target="_blank" rel="noopener noreferrer">數學素養題挑戰賽(國中)</a>
                                                <a href="contest/2021mathscience/info" target="_blank"
                                                    rel="noopener noreferrer">人機互動挑戰數理王</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RVROPQ&contest_code=QWpNV1l5Y3owMGgybFdaV1pqdU4"
                                                    target="_blank" rel="noopener noreferrer">第2屆人機互動挑戰數理王</a>
                                                <a href="contest/adlresource/frame?file=OVdiUVpvPT0&sn=RURPPQ&contest_code=QWpNV1l5YzAwMGgybFdaV1pqdU4"
                                                    target="_blank" rel="noopener noreferrer">人機互動 數理同樂</a>
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                            <dt>數位學習工作坊</dt>
                                            <dd>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=130">數位學習工作坊A</a>
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=128">數位學習工作坊C</a>
                                            </dd>
                                        </dl>
                                    </div>
                                </div>

                                <div class="category" id="HESPList">
                                    <h2 class="textAl">高等教育</h2>
                                    <div class="menu-container">
                                        <dl class="menu-item">
                                            <dt class="zooms hespcourse">師資生 <i class="fa-solid fa-caret-down"></i></dt>
                                            <dd class="hespcourse">
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=12&grade=1">師資生數學</a>
                                                (<a
                                                    href="modules_new.php?op=modload&name=D3&file=chart&subject=18">星空圖</a>)
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=13&grade=1">師資生國語</a>
                                                (<a
                                                    href="modules_new.php?op=modload&name=D3&file=chart&subject=15">星空圖</a>)
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=14&grade=1">師資生自然</a>
                                                (<a
                                                    href="modules_new.php?op=modload&name=D3&file=chart&subject=16">星空圖</a>)
                                                <a
                                                    href="modules_new.php?op=modload&name=assignMission&file=ks_viewlist_new&subject=15&grade=1">師資生社會</a>
                                                (<a
                                                    href="modules_new.php?op=modload&name=D3&file=chart&subject=17">星空圖</a>)
                                            </dd>
                                        </dl>
                                        <dl class="menu-item">
                                        </dl>
                                        <dl class="menu-item">
                                        </dl>
                                    </div>
                                </div>

                                <div class="menu-resize-div"></div>
                            </div>
                        </div>
                        <div class="menu-footer clearfix">
                            <div class="menu-sub clearfix">
                                <ul class="menu-list clearfix">
                                    <li class="elementaryList" id="#elementaryList">國小</a></li>
                                    <li class="secondaryList" id="#secondaryList">國中</a></li>
                                    <li class="highList" id="#highList">高中</a></li>
                                    <li class="tvedbList" id="#tvedbList">技高</a></li>
                                    <li class="examList" id="#examList">大考</a></li>
                                </ul>
                                <ul class="menu-list clearfix">
                                    <li class="issueList" id="#issueList">議題/素養</a></li>
                                    <li class="specialList" id="#specialList">特色專區</a></li>
                                    <li class="HESPList" id="#HESPList">高教</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li class="externalLink">
                <a href="https://elearning.cloud.edu.tw/" class="exticon cloud_edu" target="_blank"
                    rel="noopener noreferrer"><i></i></a>
                <a href="https://meet.google.com/new" class="exticon googleMeet" target="_blank"
                    rel="noopener noreferrer"><i></i></a>
                <a href="https://classroom.google.com/" class="exticon googleClassroom" target="_blank"
                    rel="noopener noreferrer"><i></i></a>
                <a class="exticon logouturl" href="modules_new.php?act=logout"><i class="fas fa-sign-out-alt"></i>登出</a>
            </li>
        </ul>
    </header>
    <main>
        <nav>
            <div class="externalLink">
                <div>
                    <a href="https://elearning.cloud.edu.tw/" class="exticon cloud_edu" target="_blank"
                        rel="noopener noreferrer"><i></i>教育雲平台</a>
                    <a href="https://meet.google.com/new" class="exticon googleMeet" target="_blank"
                        rel="noopener noreferrer"><i></i>Google Meet</a>
                    <a href="https://classroom.google.com/" class="exticon googleClassroom" target="_blank"
                        rel="noopener noreferrer"><i></i>Google Classroom</a>
                </div>
                <a class="exticon logouturl" href="modules_new.php?act=logout"><i class="fas fa-sign-out-alt"></i>登出</a>
            </div>
            <ul class="personalInfo">
                <li>
                    <div class="headPic"><a
                            href="modules_new.php?op=modload&name=setting&file=personal_setting&setting=roledata_set"><span class="notificationDot"></span><img class="img-circle" src="images/role/head/head01-50.png" /></a>
                    </div>
                    <div class="headName">
                        <span></span>
                        <span>					</span>
                        <span></span>
                    </div>
                    <div>
                        <a href="modules_new.php?op=modload&name=setting&file=personal_setting&setting=account"
                            title="個人設定"><i class="fas fa-cog"></i>
                        </a>
                    </div>
                </li>
                <li class="displayFlex">
                    <a href="modules_new.php?op=modload&name=notifications&file=QANotification&screen=frame">
                        <span>訊息</span>
                        <span>0 個</span>
                    </a>
                    <a href="modules_new.php?op=modload&name=srl&file=calendar">
                        <span>待辦</span>
                        <span>0 個</span>
                    </a>
                </li>
            </ul>
            <ul class="navList">
                <li><span class="navTitleLink"><a href="modules_new.php?op=modload&name=dashboard&file=modules_student" title="我的任務"><i class="fas fa-tachometer-alt"></i>我的任務</a></span>
                </li>
                <li><span class="navTitleLink"><a href="modules_new.php?op=modload&name=D3&file=chart&subject=10" title="知識結構星空圖"><i class="fa-solid fa-share-nodes"></i>知識結構星空圖</a></span>
                </li>
                <li><span class="navTitleLink"><a href="modules_new.php?op=modload&name=coin&file=coin_rank_new&crumbs=獎勵" title="獎勵"><i class="fas fa-donate"></i>獎勵</a></span>
                </li>
                <li><span><i class="fas fa-chart-bar"></i>報表</span>
                    <ul>
                        <li><a href="modules_new.php?op=modload&name=ExamResult&file=missionReport&crumbs=測驗報告"
                                title="測驗報告">測驗報告</a></li>
                        <li><a href="modules_new.php?op=modload&name=learn_video&file=video_personal_file&crumbs=學習紀錄"
                                title="學習紀錄">學習紀錄</a></li>
                    </ul>
                </li>
                <li><span><i class="fas fa-comments"></i>討論</span>
                    <ul>
                        <li><a href="modules_new.php?op=modload&name=srl&file=learning_note&crumbs=筆記" title="筆記">筆記</a>
                        </li>
                        <li><a href="modules_new.php?op=modload&name=srl&file=learning_ask_student&crumbs=提問"
                                title="提問">提問</a></li>
                        <li><a href="eZDiscus/index.php" target="_blank" rel="noopener noreferrer" title="討論區">討論區</a>
                        </li>
                    </ul>
                </li>
                <li><span><i class="fas fa-clipboard-check"></i>學習扶助</span>
                    <ul>
                        <li><a href="modules_new.php?op=modload&name=remedyTest&file=query_prioriData&crumbs=科技化評量"
                                title="科技化評量">科技化評量</a></li>
                        <li><a href="modules_new.php?op=modload&name=remedyTest&file=query_prioriData_basicalAbility&crumbs=縣市學力檢測"
                                title="縣市學力檢測">縣市學力檢測</a></li>
                        <li><a href="modules_new.php?op=modload&name=remedyTest&file=query_prioriData_new&crumbs=大考專區"
                                title="大考專區">大考專區</a></li>
                    </ul>
                </li>
                <li><span class="navTitleLink"><a href="modules_new.php?op=modload&name=info&file=web_resource"><i class="fas fa-globe"></i>網站資源</a></span>
                </li>
            </ul>
            <ul class="webInfo">
                <li><button id="btn2canvas" class="btn report">問題回報</button></li>
                <li>© since 2016 國立臺中教育大學 <br /> 測驗統計與適性學習研究中心</li>
            </ul>
        </nav>
        <div class="menubtn2">
            <i class="fa-solid fa-angle-left"></i>
        </div>
        <section>
            <!-- 本 ModalBox小視窗 ModalBoxBig大視窗 為共用不能夠移除 -->
            <div class="ModalBoxBig"></div>
            <div class="ModalBox"></div>
            <!-- 本 ModalBox 為共用不能夠移除 -->

            <style>
                #titleWrap {
                    padding: 10px 15px 0;
                    margin-bottom: 30px;
                }

                h1 {
                    position: relative;
                    font-size: 32px;
                }

                h1::before {
                    content: "";
                    display: block;
                    position: absolute;
                    width: 40px;
                    height: 5px;
                    background-color: var(--main-color);
                    left: auto;
                    bottom: -13px;
                }

                .bread-wrap a {
                    position: relative;
                    font-size: 15px;
                    margin-right: 20px;
                    cursor: pointer;
                }

                .bread-wrap a:last-of-type {
                    color: var(--distinct-color);
                    margin-right: 0;
                    cursor: default;
                }

                .bread-wrap a::before {
                    content: ">";
                    display: block;
                    position: absolute;
                    right: -16px;
                    top: 50%;
                    transform: translateY(-50%);
                }

                .bread-wrap a:last-of-type::before {
                    content: "";
                }
            </style>

            <link rel="stylesheet" href="css/mission_dashboard.css">
            <style>
                @media only screen and (max-width: 1265px) {
                    .filterBar.permanentshow>.filterCondition {
                        position: unset;
                        margin: 0px;
                        flex-wrap: wrap;
                        max-width: min-content;
                    }

                    .filterBar>.filterCondition>* {
                        width: 635px;
                    }

                    .switchSpan {
                        display: inline-block;
                    }

                    .filterBar {
                        display: inline-block;
                        position: relative;
                        width: calc(100% - 85px);
                    }
                }
            </style>
            <!-- 行事曆公告 -->
            <link rel="stylesheet" href="css/modulesNews.css?ver=20240517012835" type="text/css">
            <style>
                .upperMain {
                    height: 300px;
                    margin: 5px 0px;
                }

                .upperMain>*:not(:first-child) {
                    margin: 0px 0px 0px 10px;
                }

                .upperMain>.flex1 {
                    flex: 1;
                }

                .upperMain>.flex2 {
                    flex: 2;
                }

                .upperMain>.calendarMainBox {
                    border-radius: 20px;
                    justify-content: space-evenly;
                    border: 2px solid var(--main-light);
                }

                .upperMain>.calendarMainBox>.toDoBox {
                    width: 38%;
                    height: 100%;
                }

                .upperMain>.calendarMainBox>.calendarBox {
                    width: 60%;
                }

                .upperMain>.newsWrap {}

                @media screen and (max-width:769px) {
                    .upperMain {
                        height: unset;
                        flex-direction: column;
                    }

                    .upperMain>*:not(:first-child) {
                        margin: 10px 0px 0px 0px;
                    }

                    .upperMain>.flex1,
                    .upperMain>.flex2 {
                        flex: unset;
                        height: 300px;
                        flex-direction: column;
                        flex-wrap: nowrap;
                    }

                    .upperMain>.calendarMainBox>.toDoBox {
                        width: 100%;
                        height: 100px;
                    }

                    .upperMain>.calendarMainBox>.calendarBox {
                        width: 100%;
                        height: 200px;
                    }
                }

                .calendertodolistbtn {
                    margin: 12.5px 0px;
                    display: flex;
                    float: right;
                }

                .calendertodolistbtn>* {
                    margin-left: 5px;
                }
            </style>

            <script src="modulesNews_data.js?ver=20240517012835"></script>
            <script>
                var routerForCalNews = 'MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem8wTWpvaVptOXNaR1Z5UFhObGRIUnBibWNtWm1sc1pUMXdaWEp6YjI1aGJGOXpaWFIwYVc1blgzQnliMlJpSWpzPUVkVUFkTDNBRTVENTlFMTNFQ0E1N0IxRkExODhBM0NBOThGODU4=3AE5D59E13ECA57B1FA188A3CA98F858==';

	//宣告
	var login = '/login.';
	var loginOpenId = '/login4chc.';
	var loginAialtestQuick = '/quickLogin4LAB.';
	var loginsso = '/sso';
	var loginoidc = '/oidc';
	var userIdentity = 'student';
	var userAdmin = '';
	var userAll = 'all';
	var times = 0;
	var assembleData = [];
	var aNewsModelBoxData = [];

	$(function() {
		initBind();

		showCalNews();

		getModulesNews_data();
	});


	// function
	function initBind() {
		$(document).on('click', '#showCalendar', function() {
			$.ajax({
				type: 'post',
				url: 'turnpage.php',
				dataType: 'json',
				data: {
					router: routerForCalNews,
					act: 'updatePersonalStatus',
					calendar: $('#showCalendar:checked').length
				}
			}).done(function(result) {
				if (result.status != '' && result.status == 'timeout') {
					location.href = 'logout_msg.php';
				}

				if ($('#showCalendar:checked').length == 0) { //關閉公告行事曆
					$('#showCalendar').prop('checked', false);
					$('.upperMain').css('display', 'none');
				} else if ($('#showCalendar:checked').length == 1) { //打開公告行事曆
					$('#showCalendar').prop('checked', true)
					$('.upperMain').css('display', 'flex');
				}
			});
		});

		$(document).on('click', '.newsList', function() {
			$('.newsModalBox').css('display', 'flex');
			var dataIndex = $(this).data('index');
			showNewsDetail(dataIndex, 'assembleData');
		});

		$(document).on('click', '.closeNews', function() {
			$('.newsModalBox').css('display', 'none');
		});
	}

	function getModulesNews_data() {
		// 把各身份的newsData彙整到assembleData
		gatherNewsData(userIdentity);
		// 判斷是否有公告，寫入newsTitle
		assembleData.sort(function(a, b) {
			return a.startdate < b.startdate ? 1 : -1;
		});
		if (assembleData.length != 0) {
			showNews()
			for (let i in assembleData) {

				let sToday = new Date();
				let sStartdateDuring = new Date(assembleData[i].startdate);
				let sEnddateDuring = new Date(assembleData[i].enddate);
				let newsIcon = "";
				if (sToday > sStartdateDuring && sToday <= sEnddateDuring) {
					aNewsModelBoxData.push(assembleData[i]);

					switch (assembleData[i].icon) {
						case 'new':
							newsIcon = '<span class="newsIcon latest">NEW</span>';
							break;
						case 'warning':
							newsIcon = '<span class="newsIcon warning"><i class="fas fa-exclamation-triangle"></i></span>';
							break;
					}

				}

				$(".newsListWrap").append('<div class="newsList" data-index="' + i + '">' + newsIcon + assembleData[i].newsTitle + '<span class="newsDate">' + assembleData[i].startdate + '</span></div>');

			}

			// 判斷是否剛登入:是，直接顯示內容
			if (document.referrer.indexOf(login) != -1 ||
				document.referrer.indexOf(loginOpenId) != -1 ||
				document.referrer.indexOf(loginAialtestQuick) != -1 ||
				document.referrer.indexOf(loginsso) != -1 ||
				document.referrer.indexOf(loginoidc) != -1
			) {
				$('.newsModalBox').css('display', 'flex');
				showNewsDetail(0);
			}
		}
	}

	function showNews() {
		$('.news').css('display', 'block');
	}

	function gatherNewsData(userIdentity) {
		// 對所有使用者公告
		if (times == 0) {
			times++;
			gatherNewsData(userAll);
		};
		// 判斷teacher是否有主任或校長身份
		if (userIdentity == 'teacher') {
			if (userAdmin == 'principal') {
				gatherNewsData(userAdmin);
			}
		};
		// newsData 放進 assembleData，新消息(橘)排前
		for (let identity in newsData) {
			if (identity == userIdentity && newsData[identity].length != 0) {
				for (let i in newsData[identity]) {
					if (newsData[identity][i].newsIcon == 'new') {
						assembleData.unshift(newsData[identity][i]);
					} else {
						assembleData.push(newsData[identity][i]);
					}
				}
			}
		};
	}

	function addNextNews(showType) {
		$('.nextNews').click(function() {
			var dataIndex = $(this).data('index');
			showNewsDetail(dataIndex, showType);
		});
	}

	// 判斷內文順序，並寫入內文
	function showNewsDetail(dataIndex, showType) {
		showData = showType == 'assembleData' ? assembleData : aNewsModelBoxData;
		showLength = showData.length;

		if (showLength != 0) {
			if (dataIndex + 1 < showLength) {
				$('.newsDetail').html(
					'<h3>' + showData[dataIndex].newsTitle + '</h3>' +
					showData[dataIndex].newsDetail +
					'<button class="btn defaultBtn nextNews" data-index="' + (dataIndex + 1) + '" >下一則</button>'
				);
				addNextNews(showType);
			} else {
				$('.newsDetail').html(
					'<h3>' + showData[dataIndex].newsTitle + '</h3>' +
					showData[dataIndex].newsDetail +
					'<button class="btn defaultBtn closeNews">結束</button>'
				);
			};
		} else {
			$('.newsModalBox').css('display', 'none');
		}
	}

	function showCalNews() {
		$.ajax({
			type: 'post',
			url: 'turnpage.php',
			dataType: 'json',
			data: {
				router: routerForCalNews,
				act: 'getPersonalStatus'
			}
		}).done(function(result) {
			if (result.status != '' && result.status == 'timeout') {
				location.href = 'logout_msg.php';
			}

			if (result.calendar == 0) { //關閉公告行事曆
				$('#showCalendar').prop('checked', false);
				$('.upperMain').css('display', 'none');
			} else if (result.calendar == 1) { //打開公告行事曆
				$('#showCalendar').prop('checked', true)
				$('.upperMain').css('display', 'flex');
			}
		});
	}
            </script>


            <section class="displayFlex upperMain show-flex">
                <div class="flex flex2 calendarMainBox">
                    <div class="toDoBox">
                        <style>
                            .todolist-main {
                                padding: 10px;
                                height: 100%;
                                display: flex;
                                flex-wrap: wrap;
                            }

                            .todolist-title {
                                border-bottom: 1px solid var(--main-light);
                                margin-bottom: 10px;
                                padding: 5px;
                                width: 100%;
                            }

                            .todoList {
                                overflow: auto;
                                height: calc(100% - 39px);
                                width: 100%;
                            }

                            .todoList>div {
                                display: flex;
                                justify-content: space-between;
                                margin: 5px auto 15px auto;
                            }

                            @media screen and (max-width: 769px) {
                                .todoList {
                                    width: 80%;
                                    height: 100%;
                                    max-height: 100px;
                                    overflow-y: auto;
                                }

                                .todolist-main {
                                    justify-content: space-between;
                                    border-bottom: 2px solid var(--main-light);
                                }

                                .todolist-title {
                                    width: 17%;
                                    border: none;
                                }
                            }

                            .listBox i {
                                cursor: pointer;
                                margin-right: 10px;
                                color: var(--main-color);
                            }

                            .listBox i:hover,
                            .listBox i:active {
                                color: var(--main-active);
                            }
                        </style>

                        <div class="todolist-main">
                            <h5 class="todolist-title">待辦事項</h5>
                            <div id="todoList" class="todoList">
                            </div>
                        </div>

                        <script>
                            var router =' MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem96TURvaVptOXNaR1Z5UFhOeWJDWm1hV3hsUFhCeWIyUmlYMk5oYkdWdVpHRnlJanM9RWRVQWRMM0FFNUQ1OUUxM0VDQTU3QjFGQTE4OEEzQ0E5OEY4NTg==3AE5D59E13ECA57B1FA188A3CA98F858==';

    $(document).on('click', '.listBox label',function(e){
        $.LoadingOverlay("show");

        var eventId = $(this).attr('for');
        eventId = eventId.split("-");
        var jqtoDo = '#toDo-'+eventId[1];
        var isDone = $(jqtoDo).is(":checked");

        //事項完成
        $.ajax({
            type: "post",
            url: "turnpage.php",
            async: false,
            dataType: "json",
            data: {
                router: router,
                action: 'edit_event_isDone',
                event_id: eventId[1],
                isDone: isDone
            },
        })
        .done(function(res) {
            if (res.status == 'success') {
            }
        })
        $.LoadingOverlay("hide");
    });
                        </script>
                    </div>
                    <div class="calendarBox">
                        <script src="scripts/adp_core_validation.js"></script>
                        <script>
                            var router =' MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem96TURvaVptOXNaR1Z5UFhOeWJDWm1hV3hsUFhCeWIyUmlYMk5oYkdWdVpHRnlJanM9RWRVQWRMM0FFNUQ1OUUxM0VDQTU3QjFGQTE4OEEzQ0E5OEY4NTg==3AE5D59E13ECA57B1FA188A3CA98F858==';
    var allColor = ['#F05B56','#F67C3A','#F5A614','#74B63E','#1B9AAA','#247BA0','#314CB6'];
    function allEvents(){

        let calendarEl = document.getElementById('calendar');

        if($(window).width()<742){
            eventRows = 2;
            eventTime = false;
            contHeight = 145;
            weekName = '周';
        }else{
            eventRows = 6;
            eventTime = true;
            contHeight = 296;
            weekName = '周計劃';
        }

        var calendar = new FullCalendar.Calendar(calendarEl, {
            eventColor: '#1B9AAA',
            // selectable: true, //可選擇多個日期
            // navLinks: true,
            initialView: 'dayGridWeek',
            buttonText: {
                today: '今天',
                week: weekName,
            },
            locale:'zh-tw',
            headerToolbar: false,
            dayMaxEventRows: eventRows,
            displayEventTime:eventTime,
            // eventDisplay:'list-item',
            contentHeight: contHeight,
            allDayContent: '全天',

            eventTimeFormat: { // like '14:30'
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
            },

            events: function (fetchInfo, successCallback, failureCallback) {
                // 判斷月or周視圖
                var nowView;
                let countDate = parseInt(Math.abs(fetchInfo.end - fetchInfo.start) / 1000 / 60 / 60 / 24);
                if(countDate >= 25){
                    nowView = 'month';
                }else nowView = 'week';

                var events = [];

                //讀取所有行事曆
                $.LoadingOverlay("show");

                $.ajax({
                    type: "post",
                    url: "turnpage.php",
                    dataType: "json",
                    async: false,
                    data: {
                        router: router,
                        action: 'get_all_events',
                        start: fetchInfo.startStr,
                        end: fetchInfo.endStr,
                    },
                })
                .done(function(res) {
                    if (res.status == 'success') {
                        iHtml = '';
                        $.each(res.events, function(index, event) {
                            let start_time = event.start_time.replace(' ', 'T');
                            let end_time = event.end_time.replace(' ', 'T');
                            if(event.all_day == '1'){
                                isAllday = true;
                                end_time = new Date(end_time);
                                end_time = end_time.setDate(end_time.getDate()+1);
                                end_time = new Date(end_time);
                                end_time = end_time.Format("yyyy-MM-dd");
                            }else{
                                isAllday = false;
                            }
                            events.push({
                                id: event.sn,
                                title: event.events,
                                start: start_time,
                                end: end_time,
                                color: allColor[event.eventColor],
                                allDay: isAllday,
                            });

                            if(event.is_done){
                                isCheck = 'checked';
                            }
                            else isCheck = '';
                            iHtml += `<div id="listBox-${event.sn}" class="listBox"><input type="checkbox" id="toDo-${event.sn}" ${isCheck}>
                                        <label for="toDo-${event.sn}">${event.events}</label><i id="${event.sn}" class="fas fa-ellipsis-v"></i></div>`;
                        });

                        successCallback(events);

                        if(res.events == ''){
                            iHtml += `本周無待辦事項`;
                        }

                        $('#todoList').empty().append(iHtml);
                    }
                });

                $.LoadingOverlay("hide");
            },

            dayHeaderContent: (item) => {
                if(item.view.type == 'dayGridWeek'){ //周
                    let weekDate = item.text.substring(0,(item.text.length-4));
                    let weekDateWeek = item.text.substr(-2, 1);

                    return {
                        html: `${weekDate}<br>${weekDateWeek}`
                    }
                }
            },

            dayCellContent: function(e) {
                if($(window).width()<742){
                    e.dayNumberText = e.dayNumberText.replace('日', '');
                }
            },

            moreLinkContent:function(args){
                if($(window).width()<742){
                    let count_element = document.createElement('span');
                    count_element.setAttribute('style', 'font-size: 16px; font-weight:bold;');
                    count_element.innerHTML = args.num +'+';
                    return {
                        domNodes:[count_element],
                    }
                }
            },

            dateClick: function(info) {
                if(info.view.type == 'timeGridWeek' && info.allDay == false){
                    click_time = info.dateStr.split("T");
                    click_time = click_time[0];
                }else click_time = info.dateStr;

                nowDayEvent(click_time);
            },

            select: function(info) {
            },

            eventClick: function(info) {
                let start_time = "";
                let end_time = "";

                if(info.event.allDay){ //all_day
                    start_time = info.event.start.Format("yyyy-MM-dd");
                    end_time = info.event.end.setDate(info.event.end.getDate()-1);
                    end_time = new Date(end_time);
                    end_time = end_time.Format("yyyy-MM-dd")
                }else{
                    if(info.event.start.getHours() >= 12) {
                        start_time = info.event.start.Format("yyyy-MM-dd") + " 下午 " + info.event.start.Format("hh:mm");
                    }else {
                        start_time = info.event.start.Format("yyyy-MM-dd") + " 上午 " + info.event.start.Format("hh:mm");
                    }
                    if(info.event.end.getHours() >= 12) {
                        end_time = info.event.end.Format("yyyy-MM-dd") + " 下午 " + info.event.end.Format("hh:mm");
                    }else {
                        end_time = info.event.end.Format("yyyy-MM-dd") + " 上午 " + info.event.end.Format("hh:mm");
                    }

                }

                const title = `<div class="event_title">${info.event.title}</div>`;
                const msg = `
                                <table id="view_calendar" class="calendarT" style="min-width:auto;">
                                    <tr>
                                        <th>開始時間</th>
                                        <td style="min-width:auto;">
                                            ${start_time}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>結束時間</th>
                                        <td style="min-width:auto;">
                                            ${end_time}
                                        </td>
                                    </tr>
                                </table>
                            `;
                button = [{
                    buttonText: `<i class="fa fa-pencil" style="margin-right:10px;" aria-hidden="true"></i>編輯`,
                    buttonId: "edit_btn",
                    buttonClass: "btn confirmBtn",
                },{
                    buttonText: `<i class="fa fa-trash" style="margin-right:10px;" aria-hidden="true"></i>刪除`,
                    buttonId: "delete_btn",
                    buttonClass: "btn cancelBtn"
                }];
                modalBox(title, msg, button, true);

                // 編輯事件
                $("#edit_btn").click(function() {
                    const edit_title = `<div class="event_title">編輯事件</div>`;
                    const edit_msg = `
                                    <table id="edit_calendar" class="calendarT">
                                        <tr>
                                            <th>標籤顏色</th>
                                            <td>
                                                <button class="e_red event_color" name="0"></button>
                                                <button class="e_orange event_color" name="1"></button>
                                                <button class="e_yellow event_color" name="2"></button>
                                                <button class="e_green event_color" name="3"></button>
                                                <button class="e_skyblue event_color" name="4"></button>
                                                <button class="e_blue event_color" name="5"></button>
                                                <button class="e_purple event_color" name="6"></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>事件</th>
                                            <td>
                                                <input id="edit_content" type="text" placeholder="輸入標題">
                                            </td>
                                        </tr>
                                        <tr class="allDayTr">
                                            <th>全天</th>
                                            <td>
                                                <input type="checkbox" id="edit_all_day" class="allDay_checkbox" value="second_checkbox">
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>開始時間</th>
                                            <td>
                                                <input id="edit_start_time" type="datetime-local" value="">
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>結束時間</th>
                                            <td>
                                                <input id="edit_end_time" type="datetime-local" value="">
                                            </td>
                                        </tr>
                                    </table>
                                `;

                    edit_button = [{
                        buttonText: "確定修改",
                        buttonId: "ok_edit_event",
                        buttonClass: "btn confirmBtn",
                    },{
                        buttonText: "取消修改",
                        buttonId: "cancel_edit_event",
                        buttonClass: "btn cancelBtn closeModalBoxBig"
                    }];
                    modalBoxBig(edit_title, edit_msg, edit_button, false);

                    let edit_event_color_name = allColor.indexOf(info.event.backgroundColor);
                    let edit_start_time = info.event.start.Format("yyyy-MM-dd") + "T" + info.event.start.Format("hh:mm");
                    let edit_end_time = info.event.end.Format("yyyy-MM-dd") + "T" + info.event.end.Format("hh:mm");

                    var isAllday = false;

                    if(info.event.allDay){ //all_day
                        $("#edit_all_day").prop("checked", true);
                        $('#edit_start_time').get(0).type = 'date';
                        $('#edit_end_time').get(0).type = 'date';
                        $('#edit_start_time').attr("value", info.event.start.Format("yyyy-MM-dd"));
                        edit_allday_endtime = info.event.end;
                        edit_allday_endtime = edit_allday_endtime.setDate(edit_allday_endtime.getDate()-1);
                        edit_allday_endtime = new Date(edit_allday_endtime);
                        $('#edit_end_time').attr("value", edit_allday_endtime.Format("yyyy-MM-dd"));
                        isAllday = true;
                    }else{
                        $("#edit_all_day").prop("checked", false);
                        $('#edit_start_time').attr("value", edit_start_time);
                        $('#edit_end_time').attr("value", edit_end_time);
                        isAllday = false;
                    }

                    $("#edit_all_day").change(function() {
                        if($(this).prop('checked')) {
                            input_new_start_time = $('#edit_start_time').val().split("T");
                            input_new_end_time = $('#edit_end_time').val().split("T");
                            $('#edit_start_time').get(0).type = 'date';
                            $('#edit_end_time').get(0).type = 'date';
                            $("#edit_start_time").val(input_new_start_time[0]);
                            $("#edit_end_time").val(input_new_end_time[0]);

                            isAllday = true;
                        } else {
                            input_new_start_time = $('#edit_start_time').val()+'T00:00:00';
                            input_new_end_time = $('#edit_end_time').val()+'T23:59:00';
                            $('#edit_start_time').get(0).type = 'datetime-local';
                            $('#edit_end_time').get(0).type = 'datetime-local';
                            $('#edit_start_time').val(input_new_start_time);
                            $('#edit_end_time').val(input_new_end_time);

                            isAllday = false;
                        }
                    });

                    $("button[name='"+edit_event_color_name+"']").addClass("color_active");
                    $('#edit_content').attr("value", info.event.title);

                    let edit_event_color = document.getElementsByClassName('event_color');

                    for(let i = 0; i < edit_event_color.length; i++){
                        edit_event_color[i].addEventListener('click', get_edit_event_color, false);
                    }

                    function get_edit_event_color(e){
                        // 在這個函式用於事件監聽器時： this === e.currentTarget
                        edit_event_color_name = e.currentTarget.name;
                        $(".event_color").removeClass("color_active");
                        $(this).addClass("color_active");
                    }

                    // 確定修改
                    $("#ok_edit_event").click(function() {

                        let event_title = $('#edit_content').val();
                        let start_time = $('#edit_start_time').val();
                        let end_time = $('#edit_end_time').val();

                        if(!edit_event_color_name || edit_event_color_name == '') {
                            const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                            const msg = `請選擇標籤顏色！`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }else if(!event_title || event_title == '') {
                            const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                            const msg = `請輸入事件！`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }else if(!start_time || start_time == '') {
                            const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                            const msg = `請輸入開始時間！`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }else if(!end_time || end_time == '') {
                            const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                            const msg = `請輸入結束時間！`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }else if (!isAllday && (Date.parse(start_time)).valueOf() >= (Date.parse(end_time)).valueOf()) {
                            const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                            const msg = `結束時間不能小於或等於開始時間唷！`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }else if (isAllday && (Date.parse(start_time)).valueOf() > (Date.parse(end_time)).valueOf()) {
                            const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                            const msg = `結束時間不能小於開始時間唷！`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }else {
                            $(".ModalBoxBig").hide();


                            if(isAllday){
                                start_time = $('#edit_start_time').val()+'T00:00:00';
                                end_time = $('#edit_end_time').val()+'T23:59:59';
                                all_day = '1';
                            }else all_day = '0';

                            //修改事件
                            $.LoadingOverlay("show");

                            $.ajax({
                                type: "post",
                                url: "turnpage.php",
                                dataType: "json",
                                data: {
                                    router: router,
                                    action: 'edit_event',
                                    event_id: info.event.id,
                                    events: event_title,
                                    start_time: start_time,
                                    end_time: end_time,
                                    event_color: edit_event_color_name,
                                    all_day: all_day,
                                },
                            })
                            .done(function(res) {
                                if (res.status == 'success') {
                                    info.event.remove();
                                    if(isAllday){
                                        end_time = new Date(end_time);
                                        end_time = end_time.setDate(end_time.getDate()+1);
                                        end_time = new Date(end_time);
                                        end_time = end_time.Format("yyyy-MM-dd");
                                    }
                                    calendar.addEvent({
                                        id: info.event.id,
                                        title: event_title,
                                        start: start_time,
                                        end: end_time,
                                        color: allColor[edit_event_color_name],
                                        allDay: isAllday,
                                    });

                                    getWeeklist('timeGridWeek')
                                    const title = `<i class='fas fa-check-circle modalBox_title green'></i>`;
                                    const msg = `事件修改完成`;
                                    const button = [{
                                        buttonText: "確定",
                                        buttonId: "okBtn",
                                        buttonClass: "btn confirmBtn"
                                    }];
                                    modalBox(title, msg, button, false);
                                    $(document).on("click","#okBtn", function(){
                                        allEvents();
                                    })
                                }

                            })
                            $.LoadingOverlay("hide");
                        }
                    });
                });

                // 刪除事件
                $("#delete_btn").click(function() {
                    const delete_title = `<i class='fas fas fa-times-circle red modalBox_title'></i>`;
                    const delete_msg = `<h2>刪除事件</h2>是否確認刪除事件?`;
                    const delete_button = [{
                        buttonText: "確定",
                        buttonId: "ok_delete_event",
                        buttonClass: "btn confirmBtn"
                    },{
                        buttonText: "取消",
                        buttonId: "cancel_delete_event",
                        buttonClass: "btn cancelBtn"
                    }];
                    modalBox(delete_title, delete_msg, delete_button, false);

                    $("#ok_delete_event").click(function() {
                        //刪除事件
                        $.LoadingOverlay("show");

                        $.ajax({
                            type: "post",
                            url: "turnpage.php",
                            dataType: "json",
                            data: {
                            router: router,
                            action: 'delete_event',
                            delete_id: info.event.id,
                            },
                        })
                        .done(function(res) {
                            if (res.status == 'success') {
                                info.event.remove();
                                getWeeklist('timeGridWeek')
                            }

                        });

                        $.LoadingOverlay("hide");
                    });
                });
            },

            eventDidMount: function (event) {
                event.el.setAttribute("event-id", event.event._def.publicId);
            }
        });
        calendar.render();

        document.getElementById('prev').addEventListener('click', function() {
            calendar.removeAllEvents();
            calendar.prev();
        });
        document.getElementById('next').addEventListener('click', function() {
            calendar.removeAllEvents();
            calendar.next();
        });

        $(document).on('click', '.listBox i',function(e){
            var eventId = $(this).attr('id');
            $("#calendar").find("[event-id='"+eventId+"']")[0].click();
        });

        document.getElementById('addEvent').addEventListener('click', function() {
            const title = `<div class="event_title">新增事件</div>`;
            const msg = `
                            <table id="new_calendar" class="calendarT">
                                <tr>
                                    <th>標籤顏色</th>
                                    <td>
                                        <button class="e_red event_color" name="0"></button>
                                        <button class="e_orange event_color" name="1"></button>
                                        <button class="e_yellow event_color" name="2"></button>
                                        <button class="e_green event_color" name="3"></button>
                                        <button class="e_skyblue event_color color_active" name="4"></button>
                                        <button class="e_blue event_color" name="5"></button>
                                        <button class="e_purple event_color" name="6"></button>
                                    </td>
                                </tr>
                                <tr>
                                    <th>事件</th>
                                    <td>
                                        <input id="new_content" type="text" placeholder="輸入標題">
                                    </td>
                                </tr>
                                <tr class="allDayTr">
                                    <th>全天</th>
                                    <td>
                                        <input type="checkbox" id="new_all_day">
                                        <label for="new_all_day" style="display: unset;"></label>
                                    </td>
                                </tr>
                                <tr>
                                    <th>開始時間</th>
                                    <td>
                                        <input id="new_start_time" type="datetime-local" value="">
                                    </td>
                                </tr>
                                <tr>
                                    <th>結束時間</th>
                                    <td>
                                        <input id="new_end_time" type="datetime-local" value="">
                                    </td>
                                </tr>
                            </table>
                        `;

            buttonBig  = [{
                buttonText: "確定",
                buttonId: "add_event",
                buttonClass: "btn confirmBtn ",
            },{
                buttonText: "取消",
                buttonId: "cancel_event",
                buttonClass: "btn cancelBtn closeModalBoxBig"
            }];
            modalBoxBig(title, msg, buttonBig, false);

            let event_color = document.getElementsByClassName('event_color');
            let event_color_name = "4";

            for(let i = 0; i < event_color.length; i++){
                event_color[i].addEventListener('click', get_event_color, false);
            }

            function get_event_color(e){
                // 在這個函式用於事件監聽器時： this === e.currentTarget
                event_color_name = e.currentTarget.name;
                $(".event_color").removeClass("color_active");
                $(this).addClass("color_active");
            }

            var isAllday = false;

            // 預設行程時間
            // let dateStart = info.dateStr.split("+");
            // let dateEnd = info.dateStr.split("+");
            // let today = $('.fc-day-today').attr('data-date');
            var today = new Date();
            var today = today.Format("yyyy-MM-dd");

            $('#new_start_time').attr("value", today+ "T08:00");
            $('#new_end_time').attr("value", today+ "T09:00");

            $("#new_all_day").change(function() {
                if($(this).prop('checked')) {
                    input_new_start_time = $('#new_start_time').val().split("T");
                    input_new_end_time = $('#new_end_time').val().split("T");
                    $('#new_start_time').get(0).type = 'date';
                    $('#new_end_time').get(0).type = 'date';
                    $("#new_start_time").val(input_new_start_time[0]);
                    $("#new_end_time").val(input_new_end_time[0]);
                    isAllday = true;
                } else {
                    input_new_start_time = $('#new_start_time').val()+'T00:00:00';
                    input_new_end_time = $('#new_end_time').val()+'T23:59:00';
                    $('#new_start_time').get(0).type = 'datetime-local';
                    $('#new_end_time').get(0).type = 'datetime-local';
                    $('#new_start_time').val(input_new_start_time);
                    $('#new_end_time').val(input_new_end_time);
                    isAllday = false;
                }
            });

            $("#add_event").click(function() {
                let event_title = $('#new_content').val();
                let start_time = $('#new_start_time').val();
                let end_time = $('#new_end_time').val();

                if(event_color_name === '-1' || event_color_name == '') {
                    const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                    const msg = `請選擇標籤顏色！`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];
                    modalBox(title, msg, button, false);
                }else if(!event_title || event_title == '') {
                    const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                    const msg = `請輸入事件！`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];
                    modalBox(title, msg, button, false);
                }else if(!start_time || start_time == '') {
                    const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                    const msg = `請輸入開始時間！`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];
                    modalBox(title, msg, button, false);
                }else if(!end_time || end_time == '') {
                    const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                    const msg = `請輸入結束時間！`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];
                    modalBox(title, msg, button, false);
                }else if (!isAllday && (Date.parse(start_time)).valueOf() >= (Date.parse(end_time)).valueOf()) {
                    const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                    const msg = `結束時間不能小於或等於開始時間唷！`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];
                    modalBox(title, msg, button, false);
                }else if (isAllday && (Date.parse(start_time)).valueOf() > (Date.parse(end_time)).valueOf()) {
                    const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                    const msg = `結束時間不能小於開始時間唷！`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];
                    modalBox(title, msg, button, false);
                }
                else {
                    $(".ModalBoxBig").hide();

                    if(isAllday){
                        start_time = $('#new_start_time').val()+'T00:00:00';
                        end_time = $('#new_end_time').val()+'T23:59:59';
                        all_day = '1';
                    }else all_day = '0';

                    //新增事件
                    $.LoadingOverlay("show");

                    $.ajax({
                        type: "post",
                        url: "turnpage.php",
                        dataType: "json",
                        data: {
                            router: router,
                            action: 'add_event',
                            event_color: event_color_name,
                            events: event_title,
                            start_time: start_time,
                            end_time: end_time,
                            all_day: all_day,
                        },
                    })
                    .done(function(res) {
                        if (res.status == 'success') {
                            if(isAllday){
                                end_time = new Date(end_time);
                                end_time = end_time.setDate(end_time.getDate()+1);
                                end_time = new Date(end_time);
                                end_time = end_time.Format("yyyy-MM-dd");
                            }
                            calendar.addEvent({
                                id: res.id,
                                title: event_title,
                                start: start_time,
                                end: end_time,
                                color: allColor[event_color_name],
                                allDay: isAllday,
                            });

                            getWeeklist('timeGridWeek')
                            $.LoadingOverlay("hide");

                            const title = `<i class='fas fa-check-circle modalBox_title green'></i>`;
                            const msg = `事件新增成功`;
                            const button = [{
                                buttonText: "確定",
                                buttonId: "okBtn",
                                buttonClass: "btn confirmBtn"
                            }];
                            modalBox(title, msg, button, false);
                            $(document).on("click","#okBtn", function(){
                                allEvents();
                            })
                        }
                    });
                }
            });
        });

        function getWeeklist(viewsType){
            if(viewsType == 'timeGridWeek'){
                var weekStartTime = calendar.currentData.dateProfile.activeRange.start;
                weekEndTime = weekStartTime/1000;
                weekEndTime += 86400*7;
                weekEndTime = new Date(weekEndTime*1000).Format('yyyy-MM-dd');
                getStart = weekStartTime.Format('yyyy-MM-dd');
                getEnd = weekEndTime;
            }else if(viewsType == 'dayGridMonth'){
                var monthStartTime = calendar.currentData.dateProfile.activeRange.start;
                monthTime = monthStartTime/1000;
                monthTime += 86400*10;
                getStart = getMonthFirst(new Date(monthTime*1000));
                getEnd = getMonthEnd(new Date(monthTime*1000));
            }

            var events = [];

            //讀取行事曆
            $.LoadingOverlay("show");

            $.ajax({
                type: "post",
                url: "turnpage.php",
                dataType: "json",
                async: false,
                data: {
                    router: router,
                    action: 'get_all_events',
                    start: getStart,
                    end: getEnd,
                },
            })
            .done(function(res) {
                if (res.status == 'success') {
                    iHtml = '';
                    $.each(res.events, function(index, event) {

                        if(event.is_done){
                            // if(event.mission_sn) isCheck = 'checked disabled';
                            // else
                            isCheck = 'checked';
                        }
                        else isCheck = '';
                        iHtml += `<div id="listBox-${event.sn}" class="listBox"><input type="checkbox" id="toDo-${event.sn}" ${isCheck}>
                                    <label for="toDo-${event.sn}">${event.events}</label><i id="${event.sn}" class="fas fa-ellipsis-v"></i></div>`;
                    });
                    $('#todoList').empty().append(iHtml);
                }

            })
            $.LoadingOverlay("hide");
        }

        function nowDayEvent(click_time){
            $.ajax({
                type: "post",
                url: "turnpage.php",
                dataType: "json",
                data: {
                    router: router,
                    action: 'now_allevent',
                    // event_id: info.event.id,
                    // events: event_title,
                    click_time: click_time,
                },
            })
            .done(function(res) {
                if (res.status == 'success') {
                    var iHtml='';
                    var title = '';

                    if(res.events == 'noEvent'){
                        title += `<div>當日無事件</div>`;
                    }else{

                        title += `<div>當日事件</div>`;
                        $.each(res.events, function(index, event) {
                            let checked = '';
                            if(event.is_done == 1){
                                checked = `<i style="color:${allColor[event.eventColor]}" class="fas fa-check-circle"></i>`;
                            }else {
                                checked = `<span class="event_color" style="background:${allColor[event.eventColor]}"></span>`;
                            }
                            iHtml +=  `<div class="reminder">
                                                <div>${checked}</div>
                                                <div class="event">${event.events}</div>
                                            </div>
                                            <div class="reminder_time"><span class="time_color">到期時間 : ${event.end_time.substring(11, 16)}</span></div>`;
                        });
                    }
                    getWeeklist('timeGridWeek')

                    // const msg = `事件修改完成`;
                    const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                    }];


                    modalBox(title, iHtml, button, false);


                }

            })
        }

        $(".fc-col-header-cell").on( "click", function(e) {
            nowDayEvent($(this).attr('data-date'));
        });
    }
    document.addEventListener('DOMContentLoaded', function() {
        allEvents();
    });

    // 時間format
    Date.prototype.Format = function (fmt) { //author: meizz
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小時
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3),
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
        if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    };

    $(document).ready(function(){
        $('#calendar .fc-col-header').css("width","100%");
        $('#calendar .fc-daygrid-event-harness').css({'visibility':'visible','position':'relative'});
        $('#calendar .fc-scrollgrid-sync-table').css('width','100%');
        $('#calendar .fc-daygrid-body').css({"width":"100%","height":"100%"});
        $('#calendar .fc-scrollgrid-sync-table').css("height","100%");
    });
                        </script>

                        <style>
                            .ModalBox,
                            .ModalBoxBig {
                                z-index: 1000;
                            }

                            .fc-view {
                                display: flex;
                            }

                            .prev,
                            .next {
                                width: 5%;
                                height: 60px;
                                background: none;
                                border: none;
                                cursor: pointer;
                            }

                            @media screen and (max-width:760px) {

                                .prev,
                                .next {
                                    height: unset;
                                }
                            }

                            .fc-daygrid-block-event {
                                border-radius: 25px;
                            }

                            .fc .fc-scrollgrid-liquid {
                                border-style: none;
                            }

                            .fc .fc-scrollgrid-section-header>td {
                                border-style: none;
                            }

                            .fc .fc-scrollgrid-section-liquid>td {
                                border-style: none;
                            }

                            .fc .fc-daygrid-day.fc-day-today {
                                background-color: transparent;
                            }

                            .fc-daygrid-day.fc-day:hover {
                                background: var(--secondary-color);
                            }

                            .fc-col-header .fc-day-today {
                                background: var(--secondary-color);
                            }

                            .calendar-wrapper {
                                margin: 0 auto;
                                height: 100%;
                            }

                            .fc-theme-standard th {
                                border: none;
                                border-bottom: 1px solid #ddd;
                            }

                            .fc-theme-standard td {
                                border: none;
                            }

                            #addEvent {
                                position: absolute;
                                bottom: 10px;
                                right: 10px;
                                width: 50px;
                                height: 50px;
                                border-radius: 99em;
                                border: none;
                                z-index: 1;
                                cursor: pointer;
                            }

                            .event_title:after {
                                content: "";
                                display: block;
                                width: 50%;
                                height: 2px;
                                background: #000000;
                                margin: 15px auto 20px auto;
                            }

                            .calendar-wrapper .btn.confirmBtn,
                            .calendar-wrapper .btn.cancelBtn {
                                width: 30%;
                                min-width: 100px;
                            }

                            .red {
                                color: var(--contrast-color);
                            }

                            .green {
                                color: var(--confirm-dark);
                            }

                            .yellow {
                                color: #fdd365;
                            }

                            .modalBox_title {
                                margin-bottom: 10px;
                                font-size: 80px;
                            }

                            .ModalBoxDetail {
                                min-width: 100%;
                            }

                            .ModalBoxDetailTitle {
                                margin-bottom: 20px;
                            }

                            .ModalBoxContent {
                                min-width: 300px;
                            }

                            .ModalBoxButton {
                                margin-top: 20px;
                            }

                            .ModalBoxDetailText {
                                color: #595959;
                            }

                            .ModalBoxDetail h2 {
                                margin-bottom: 15px;
                            }

                            .calendarT th {
                                min-width: 100px;
                            }

                            .calendarT td {
                                font-size: 19px;
                                padding: 3px 5px;
                                height: 34px;
                            }

                            .calendarT input {
                                width: 100%;
                                background: #fff;
                                border: 1px solid #ddd;
                                border-radius: 5px;
                                font-size: 16px;
                                padding: 3px 5px;
                                height: 34px;
                                margin-bottom: 5px;
                            }

                            /* 事件標籤顏色 */
                            .e_red {
                                background: #F05B56;
                            }

                            .e_orange {
                                background: #F67C3A;
                            }

                            .e_yellow {
                                background: #F5A614;
                            }

                            .e_green {
                                background: #74B63E;
                            }

                            .e_skyblue {
                                background: #1B9AAA;
                            }

                            .e_blue {
                                background: #247BA0;
                            }

                            .e_purple {
                                background: #314CB6;
                            }

                            .event_color {
                                width: 22px;
                                height: 22px;
                                border: none;
                                margin-right: 10px;
                                border-radius: 22px;
                            }

                            /* 事件提醒 (20210315) */
                            .reminder {
                                display: flex;
                                align-items: center;
                            }

                            .reminder .event_color,
                            .reminder .fa-check-circle {
                                display: inline-block;
                                width: 18px;
                                height: 18px;
                                margin-right: 10px;
                                border-radius: 50%;
                            }

                            .reminder .event {
                                text-align: left;
                                width: 100%;
                                max-width: 500px;
                            }

                            .reminder_time {
                                text-align: left;
                                text-indent: 26px;
                                margin-bottom: 8px;
                            }

                            .reminder_time .time_color {
                                font-size: 17px;
                                vertical-align: middle;
                                color: var(--contrast-color);
                            }

                            .reminder_time:last-child {
                                padding-bottom: 30px;
                            }

                            .time_title {
                                margin: 20px 0 10px;
                                font-size: 20px;
                                font-weight: bold;
                                border-top: 1px solid #ddd;
                                border-bottom: 1px dashed #ccc;
                            }

                            .time_title span {
                                margin-left: 14px;
                                color: var(--contrast-color);
                            }

                            /*End of 事件提醒 (20210315) */

                            .color_active {
                                width: 26px;
                                height: 26px;
                                border: 2px solid black;
                            }

                            .calendarT .allDay_checkbox {
                                width: 20px;
                                height: 20px;
                            }

                            @media screen and (max-width: 1500px) {
                                .fc .fc-col-header-cell-cushion {
                                    font-size: 15px;
                                }
                            }

                            @media screen and (min-width:521px) {
                                .reminder {
                                    width: 100%;
                                    max-width: 500px;
                                    min-width: 350px;
                                }
                            }

                            @media screen and (max-width: 520px) {
                                .ModalBoxContent {
                                    min-width: 200px;
                                }

                                .calendar-wrapper {
                                    /*min-width: auto;*/
                                }

                                .calendarT {
                                    display: flex;
                                }

                                .calendarT>tbody {
                                    width: 100%;
                                }

                                .calendarT td {
                                    width: 100%;
                                    height: auto;
                                }

                                .event_color {
                                    margin-right: 1px;
                                }

                                .calendarT th {
                                    text-align: left;
                                    padding-left: 5px;
                                }

                                .calendarT tr {
                                    display: flex;
                                    flex-wrap: wrap;
                                    width: 100%;
                                }

                                .allDayTr>th {
                                    min-width: auto;
                                }

                                .allDayTr>td {
                                    width: auto;
                                }

                                .fc .fc-toolbar-title {
                                    font-size: 1.70em;
                                }

                                .reminder {
                                    min-width: 210px;
                                }

                            }
                        </style>

                        <div class="calendar-wrapper" style="position: relative ;display: flex;">
                            <button id="prev" class="prev"><i class="fas fa-caret-left"></i></button>
                            <div id="calendar" style="width: 90%;">
                            </div>
                            <button id="next" class="next"><i class="fas fa-caret-right"></i></button>
                            <button id='addEvent' class="distinctBtn"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>

                <!-- 公告 -->
                <div class="flex1 newsWrap">
                    <div id="news">
                        <h2 class="newsTitle"><i class="newsBtn fas fa-bullhorn"></i>公告</h2>

                        <!-- 公告列表 -->
                        <div class="newsListWrap" style="display: block;"></div>
                    </div>
                </div>
            </section>

            <!-- 開關 -->
            <div class="calendertodolistbtn">
                <span>公告與行事曆</span>
                <label class="switch">
		<input type="checkbox" id="showCalendar">
		<span class="slider round"></span>
	</label>
            </div>

            <!-- 公告內容 -->
            <div class="newsModalBox">
                <div class="newsContent">
                    <div class="newsDetail"></div>
                    <button class="trigger closeNews"><i class="fas fa-times"></i></button>
                </div>
            </div>

            <!-- Top Buttons -->
            <section class="dashboardFirstSec">
                <h2>任務
                    <p class="sub_info">顯示9個月內的任務</p>
                </h2>
            </section>

            <!-- Page Contents -->
            <section id="displaySwitch">
                <div class="displaySwitch">
                    <div class="pageHeader">
                        <h6 id="displayMissionScope"></h6>
                        <!-- Filter -->
                        <div>
                            <div class="filterBar permanentshow">
                                <form class="filterCondition" name="QueryForm"
                                    action="modules_new.php?op=modload&name=dashboard&file=modules_student"
                                    method="post">
                                    <select id="sSelfPractice" name="sSelfPractice" class="shortsSelfPractice">
                            <option value="0">老師指派</option>
                            <option value="1">自己指派</option>
                            <option value="2">家長/大學伴指派</option>
                        </select>
                                    <select id="missionType" name="missionType" class="shortmissionType">
							<option value="all">全部任務</option>
                        </select>
                                    <select id="dowh_val" name="dowh_val" class="shortdowh_val">
                            <option value="1">進行中</option>
                            <option value="2">過期</option>
                            <option value="3">已完成</option>
                        </select>
                                    <button type="submit" name="btn02" class="btn">篩選</button>
                                </form>
                            </div>
                            <span class="switchSpan">
                    <i id="showMissionCard" class="fas fa-th-large actIcon"></i>
                    <i id="showMissionList" class="fas fa-list"></i>
                </span>
                        </div>
                        <!-- End of Filter -->
                    </div>
                    <!-- displaySwitchContent -->
                    <div id="missionLayout_card" class="displaySwitchContent displayFlex column4 ">
                        <!--卡片式任務介面 -->
                        <!-- End of 卡片式任務介面 -->
                    </div>
                    <div id="missionLayout_list" class="displaySwitchContent disaplyFlex column1">
                    </div>
                    <!-- end of displaySwitchContent -->
                </div>
                <div id="packPagination">
                    <!-- <ul class="packPagination" onchange="load_mission();" > -->
                    <ul class="packPagination">
                        <form id=page_count action="modules_new.php?op=modload&name=dashboard&file=modules_student"
                            method="post">
                            <div class="changepage">
                                <div>當前頁面：
                                    <!-- 2018-07-13 KP:避免選擇分頁後，任務狀態的表單恢復成預設(全部任務)，因此設欄位做紀錄並傳送 -->
                                    <input type="hidden" id='dowh_val2' name='dowh_val' value="">
                                    <input type="hidden" id='sSelfPractice2' name='sSelfPractice' value="">
                                    <input type="hidden" id='missionType2' name='missionType' value="">
                                    <select class="input-normal" name="page" onchange="load_mission();">
                    <!--<li><a href="#">«</a></li>-->
                <!-- end of for loop -->
                </select>
                                    總共0筆任務
                                </div>
                            </div>
                        </form>
                    </ul>
                </div>
            </section>

            <script>
                //生成任務類型
	var missionTypeList =  [{"mission_type_id":1,"name":"\u77e5\u8b58\u7d50\u69cb"},{"mission_type_id":2,"name":"\u5b78\u7fd2\u554f\u5377"},{"mission_type_id":4,"name":"\u55ae\u5143\u8a3a\u65b7\u6e2c\u9a57"},{"mission_type_id":5,"name":"\u7e31\u8cab\u8a3a\u65b7\u6e2c\u9a57"},{"mission_type_id":6,"name":"\u5b78\u529b\u6aa2\u6e2c\u8003\u53e4\u984c"},{"mission_type_id":7,"name":"\u6838\u5fc3\u7d20\u990a\u8a55\u91cf"},{"mission_type_id":8,"name":"\u7d20\u990a\u5c0e\u5411\u8a66\u984c"},{"mission_type_id":9,"name":"\u6703\u8003\u8003\u53e4\u984c"},{"mission_type_id":12,"name":"\u8ab2\u7a0b\u5305"},{"mission_type_id":13,"name":"\u5b78\u6e2c\u8003\u53e4\u984c"},{"mission_type_id":14,"name":"\u7d71\u6e2c\u8003\u53e4\u984c"},{"mission_type_id":15,"name":"\u6307\u8003\u8003\u53e4\u984c"},{"mission_type_id":16,"name":"SRL\u8868\u55ae"},{"mission_type_id":17,"name":"\u9ad8\u5c64\u6b21\u80fd\u529b\u5b78\u7fd2\u5167\u5bb9"}];
	var missionType = '';
	missionTypeList.forEach(element => {
		if(missionType == element['mission_type_id']){
			$('#missionType').append(`<option value="${element['mission_type_id']}" selected="selected">${element['name']}</option>`);
		}else{
			$('#missionType').append(`<option value="${element['mission_type_id']}">${element['name']}</option>`);
		}
	});
    // 生成條列式任務介面
    $('#missionLayout_list').append($('#missionLayout_card').children().clone());
    $('#missionLayout_list div._card').removeClass('_card').addClass('_list');
    $('div._list').each(function() {
        const sMissionSn = $(this).children('div.openDetail').attr('id') ? $(this).children('div.openDetail').attr('id').replace('_body', '') : '';
        $(this).children('div.head').before(
            `<div class="title" ${sMissionSn ? `id="${sMissionSn}_body" onclick="showmissiondata(${sMissionSn})"` : ''}>
             </div>
             <div class="tName">
             </div>`
        );

        $(this).children('div.title').append($(this).find('h3.title').text());
        $(this).children('div.tName').append($(this).find('p.tName').text());
        $(this).children('div.title').before($(this).find('div.headLeft').html());
        $(this).find('div.barContainer').insertAfter($(this).children('div.tName'));
        $(this).find('div.barPercentage').nextAll().remove();
        $(this).children('div.barContainer').after(`<div class="duration"></div>`);
        $(this).children('div.duration').append($(this).find('p.duration').html());
        $(this).children('div.duration').after(`<div class="countDown"></div>`);
        $(this).children('div.countDown').append($(this).find('p.countDown').text());

        const sCountDownText = $(this).children('div.countDown').text().trim();
        if (sCountDownText !== '已過期') {
            $(this).children('div.countDown').text(`剩餘${sCountDownText}`);
        }

        $(this).find('ul.moreWrap').insertAfter($(this).children('div.countDown'));
        $(this).children('div.head, div.line, div.openDetail').remove();
    });

    function load_mission() {
        //var page = "page"+id;
        //2018-07-13 KP:避免選擇分頁後，任務狀態的表單恢復成預設(全部任務)，因此新增傳送該選單的值
        var form_page = document.getElementById('page_count');

        $('#dowh_val2').val($('#dowh_val').val());
        $('#sSelfPractice2').val($('#sSelfPractice').val());
		$('#missionType2').val($('#missionType').val());

        form_page.submit();
    }

    //任務卡片式/列表式切換
    const MISSION_LAYOUT_CARD = 1; // 任務卡片式 = 1
    const MISSION_LAYOUT_LIST = 2; // 任務列表式 = 2

    let missionLayoutData = 1; // 任務卡片式 = 0 ; 任務列表式 = 1;
    let missionLayout_card = $("#missionLayout_card");
    let missionLayout_list = $("#missionLayout_list");

    function missionLayout(data){
        if (data == MISSION_LAYOUT_CARD) {
            $("#showMissionCard").addClass("actIcon");
            $("#showMissionList").removeClass("actIcon");
            missionLayout_card.css("display", "flex");
            missionLayout_list.addClass("none");
        }
        else if (data == MISSION_LAYOUT_LIST) {
            $("#showMissionList").addClass("actIcon");
            $("#showMissionCard").removeClass("actIcon");
            missionLayout_list.removeClass("none");
            missionLayout_card.css("display", "none");
        }
    }

    missionLayout(missionLayoutData);

    $(document).on('click', "#showMissionCard", function() {
        missionLayout(MISSION_LAYOUT_CARD);
    });

    $(document).on('click',"#showMissionList", function() {
        missionLayout(MISSION_LAYOUT_LIST);
    });

    //If window width < 760, then the class of MissionDetail would be changed from .hidden to .none
    var wdth=$(window).width();
    var allMissionDetail = $('.detail');
    function missionDetailClassRemove(){
        wdth=$(window).width();
        if (wdth<=768){
            missionLayout(MISSION_LAYOUT_CARD);
        }
    }

    $(document).ready(function() {
        missionDetailClassRemove();
    });

    $(window).resize(function() {
        missionDetailClassRemove();
    });

    var expired= 0; //0512 任務過期後，就不可再做任務
    let showBox = 0;
    function showmissiondata(id) {
        var mission_id = id[0].id;
        var router = `MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem8wT1RvaVptOXNaR1Z5UFdGemMybG5iazFwYzNOcGIyNG1abWxzWlQxd2NtOWtZbDl0YVhOemFXOXVYMmx1Wm05ZmMyVnlhU0k3RWRVQWRMM0FFNUQ1OUUxM0VDQTU3QjFGQTE4OEEzQ0E5OEY4NTg==3AE5D59E13ECA57B1FA188A3CA98F858==`;

        //學生關閉任務細節
        if ( $('.'+mission_id+'inlineContent').hasClass("open")){
            $('.detail').removeClass("open");
            $('.'+mission_id+'inlineContent').addClass("hidden");
            return;
        }

        $.ajax({
                type: "post",
                url: "turnpage.php",
                data: {
                router: router,
                act: 'getmissiondetail',
                mission_sn : mission_id,
            },
            dataType: "json"
        }).done(function (result) {
            if (result.status != '' && result.status == 'timeout'){
                location.href = 'logout_msg.php';
            }
            var missiondata = result;
            $('.'+mission_id +'_detailWrap *').remove();
            $("."+mission_id+"_detailWrap").append(missiondata);


            //學生開任務細節
            let missionDetail = $('.'+mission_id+'inlineContent');
            allMissionDetail = $('.detail');

            allMissionDetail.addClass("hidden");
            missionDetail.removeClass("hidden");
            missionDetail.addClass("open");
            //學生關閉任務細節
            if ( missionDetail.hasClass("open")){
                allMissionDetail.removeClass("open");
                allMissionDetail.addClass("hidden");
                missionDetail.removeClass("hidden");
                missionDetail.addClass("open");
            }
        });

        //0512 任務過期後，就不可再做任務
        const title = `<div class="event_title">任務過期</div>`;
        const msg =`<p>任務已過期，<br>請<span class='noteWordYellow'>向老師反應</span>延長任務時間。</p>`;
        const button = [{
                        buttonText: "知道了",
                        buttonId: "notice-confirmed",
                        buttonClass: "btn defaultBtn ModalBoxButton"
                    }];
        function checkShowBox(){
            if (showBox == 0){
                modalBox(title, msg, button, bCloseBtn = false);
            }
        }
        //隱藏視窗
        // if (missionDetail.hasClass("hidden")){　　//如果node是隱藏的則顯示node元素，否則隱藏
        // missionDetail.removeClass("hidden");
        // missionDetail.addClass("open");

            // showBox = 0;
        // if (missionDetail.hasClass("open")){
        // 　missionDetail.removeClass("open");
        //   missionDetail.addClass("hidden");
        //  showBox = 1;
        // }
    }

    // 210108,pei,行事曆開窗
    
    //任務加入行事曆開窗 標籤顏色
    function get_event_color(e){
        // 在這個函式用於事件監聽器時： this === e.currentTarget
        event_color_name = e.currentTarget.name;
        $(".event_color").removeClass("color_active");
        $(this).addClass("color_active");
    }

    var parent = '';
    var mission_sn = '';
    var missionalldata = [];
    function add_calendar(id,name){
        var button_id =id;
        var node_value = '---'+name;
        if (node_value == '---'+undefined)
        {
            node_value=" ";
        }
        let i = missionalldata.findIndex(x => x.mission_sn == button_id);
        let missionNm = missionalldata[i].mission_nm;
        let newMissionNm = missionNm.replace(/['"']/g,'&quot;'); // 0608 用HTML表示法 &quot; 取代 雙引號
        const title = `<div class="event_title">新增至行事曆</div>`;
        const msg = `<table id="new_calendar" class="calendarT">
                                                <tr>
                                                        <th>標籤顏色</th>
                                                        <td>
                                                            <button class="e_red event_color" name="0"></button>
                                                            <button class="e_orange event_color" name="1"></button>
                                                            <button class="e_yellow event_color" name="2"></button>
                                                            <button class="e_green event_color" name="3"></button>
                                                            <button class="e_skyblue event_color color_active" name="4"></button>
                                                            <button class="e_blue event_color" name="5"></button>
                                                            <button class="e_purple event_color" name="6"></button>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <th>事件</th>
                                                        <td>
                                                                <input id="new_content" type="text" value="${newMissionNm}">
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <th>全天</th>
                                                        <td>
                                                                <input type="checkbox" id="new_all_day" class="allDay_checkbox" value="second_checkbox">
                                                                <label for="new_all_day"></label>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <th>開始時間</th>
                                                        <td>
                                                                <input id="new_start_time" type="datetime-local" value="${missionalldata[i].start_time}">
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <th>結束時間</th>
                                                        <td>
                                                                <input id="new_end_time" type="datetime-local" value="${missionalldata[i].date}">
                                                        </td>
                                                </tr>
                                        </table>
                                `;
            buttonBig = [{
                buttonText: "確定",
                buttonId: "add_event_modules",
                // buttonClass: "btn07 closeModalBoxBig",
                buttonClass: "btn confirmBtn ",
        },{
                buttonText: "取消",
                buttonId: "cancel_event",
                buttonClass: "btn cancelBtn closeModalBoxBig"
        }];
        modalBoxBig(title, msg, buttonBig, false);
        let event_color = document.getElementsByClassName('event_color');
        let event_color_name = "4";

        for(let i = 0; i < event_color.length; i++){
        event_color[i].addEventListener('click', get_event_color, false);
        }
    }

    $(document).on('click','#add_event_modules',function(e){
        let event_title = $('#new_content').val();
        let start_time = $('#new_start_time').val();
        let end_time = $('#new_end_time').val();
        let event_color_name = $('.color_active').attr('name');
        if (!event_color_name || event_color_name == '') {
                const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                const msg = `請選擇標籤顏色！`;
                const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                }];
                modalBox(title, msg, button, false);
        }else if (!event_title || event_title == '') {
                const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                const msg = `請輸入事件！`;
                const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                }];
                modalBox(title, msg, button, false);
        }else if (!start_time || start_time == '') {
                const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                const msg = `請輸入開始時間！`;
                const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                }];
                modalBox(title, msg, button, false);
        }else if (!end_time || end_time == '') {
                const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                const msg = `請輸入結束時間！`;
                const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                }];
                modalBox(title, msg, button, false);
        }else if (!isAllday && (Date.parse(start_time)).valueOf() >= (Date.parse(end_time)).valueOf()) {
                const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                const msg = `結束時間不能小於或等於開始時間唷！`;
                const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                }];
                modalBox(title, msg, button, false);
        }else if (isAllday && (Date.parse(start_time)).valueOf() > (Date.parse(end_time)).valueOf()) {
                const title = `<i class='fas fa-exclamation-circle yellow modalBox_title'></i>`;
                const msg = `結束時間不能小於開始時間唷！`;
                const button = [{
                        buttonText: "確定",
                        buttonId: "okBtn",
                        buttonClass: "btn confirmBtn"
                }];
                modalBox(title, msg, button, false);
        }else {

                $(".ModalBoxBig").hide();

                if (isAllday){
                        start_time = $('#new_start_time').val()+'T00:00:00';
                        end_time = $('#new_end_time').val()+'T23:59:59';
                        all_day = '1';
                }else all_day = '0';

                $.LoadingOverlay("show");
                var routerCalender = `MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem96TURvaVptOXNaR1Z5UFhOeWJDWm1hV3hsUFhCeWIyUmlYMk5oYkdWdVpHRnlJanM9RWRVQWRMM0FFNUQ1OUUxM0VDQTU3QjFGQTE4OEEzQ0E5OEY4NTg==3AE5D59E13ECA57B1FA188A3CA98F858==`;
                //新增事件
                $.ajax({
                        url: "turnpage.php",
                        type: 'POST',
                        data:{
                            router: routerCalender,
                            'action': 'add_event',
                            'event_color': event_color_name,
                            'events': event_title,
                            'start_time': start_time,
                            'end_time': end_time,
                            'all_day': all_day,
                        },
                        dataType:'json'
                })
                .done(function(res) {
                        if (res.status == 'success') {

                            if (isAllday){
                                end_time = new Date(end_time);
                                end_time = end_time.setDate(end_time.getDate()+1);
                                end_time = new Date(end_time);
                                end_time = end_time.Format("yyyy-MM-dd");
                            }

                            const title = `<i class='fas fa-check-circle modalBox_title green' style="font-size: 80px;"></i>`;
                            const msg = `事件新增成功`;
                            const button = [{
                                    buttonText: "返回我的任務",
                                    buttonId: "okBtnReload",
                                    buttonClass: "btn defaultBtn"
                            }, {
                                    buttonText: "前往行事曆",
                                    buttonId: "gotocalendar",
                                    buttonClass: "btn defaultBtn"
                            }];
                            modalBox(title, msg, button, false);
                        }

                })
                $.LoadingOverlay("hide");
        }
    });
    $(document).on('click','#okBtnReload',function(){
        window.location.reload();
    });

    function get_event_color(e){
        // 在這個函式用於事件監聽器時： this === e.currentTarget
        event_color_name = e.currentTarget.name;
        $(".event_color").removeClass("color_active");
        $(this).addClass("color_active");
    }

    var isAllday = false;
    $(document).on('click','#new_all_day',function(e){
        if ($(this).prop('checked')) {
                input_new_start_time = $('#new_start_time').val().split("T");
                input_new_end_time = $('#new_end_time').val().split("T");
                $('#new_start_time').get(0).type = 'date';
                $('#new_end_time').get(0).type = 'date';
                $("#new_start_time").val(input_new_start_time[0]);
                $("#new_end_time").val(input_new_end_time[0]);
                isAllday = true;
        } else {
                input_new_start_time = $('#new_start_time').val()+'T00:00:00';
                input_new_end_time = $('#new_end_time').val()+'T23:59:00';
                $('#new_start_time').get(0).type = 'datetime-local';
                $('#new_end_time').get(0).type = 'datetime-local';
                $('#new_start_time').val(input_new_start_time);
                $('#new_end_time').val(input_new_end_time);
                isAllday = false;
        }
    });

    $(document).on('click','#gotocalendar',function(e){
        // 開新分頁
        // window.open("modules.php?op=modload&name?=srl&file=calendar");
            var link ="modules_new.php?op=modload&name=srl&file=calendar";
        window.location.href=link;
    });

    //小組長 學生開組員進度窗
    let openGroupLeaderBox = $(".openGroupLeaderBox");
    function openUpGroupLeaderBox(id){
        const deleteTitle = `組員進度表TITLE`;
        const deleteText = "組員進度表"
        const deleteButton ="";
        modalBoxBig(deleteTitle, deleteText, deleteButton)
    };

    //學生進度條
    $(document).ready(function(){
        let bar = $(".bar");
        for(let i=0; i<bar.length; i++){
        let percentage = bar.eq(i).parent().attr("data-percentage");
        bar.eq(i).css("width",percentage+"%");
        }
    });
            </script>
            <script src="././js/assignment.js"></script>
        </section>
        <!-- dialogModal 問題回報視窗 -->
    </main>
    <!-- 1. Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KV6JP68J"></script> -->
    <script>
        var bHiddenNAV = '';

		const sAclUrl = document.referrer.split('?');

		if(sAclUrl[0] == location.origin + "/modules_new.php"){
			$('main').addClass('hidemenu');
		}

		if (bHiddenNAV === 'hidden') {
			$('header').remove();
			$('main').addClass('nomenu');
			$('main > nav').remove();
			$('main > .menubtn2').remove();
			$('html').css('overflow', 'auto');
			$('[type=radio]:checked, [type=radio]:not(:checked), [type=checkbox]:checked, [type=checkbox]:not(:checked)').css('position', 'unset');
			$('input').css('height', 'auto')
		}

		// ga
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('set', {
			'縣市': '臺中市',
			'學校': '',
			'學等': 'js',
			'學年': '1122',
			'年級': '11',
			'班級': '1',
			'身份': '學生'
		});
		gtag('config', 'UA-108376301-1', {
			'user_id': '193313-user4042346',
			'custom_map': {
				'dimension1': '縣市',
				'dimension2': '學校',
				'dimension3': '學等',
				'dimension4': '學年',
				'dimension5': '年級',
				'dimension6': '班級',
				'dimension7': '身份'
			}
		});
		gtag('event', 'page_view', {
			'縣市': '臺中市',
			'學校': '',
			'學等': 'js',
			'學年': '1122',
			'年級': '11',
			'班級': '1',
			'身份': '學生'
		});

		$('#cloud_idx').click(function(e) {
			var router = 'MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem96TlRvaVptOXNaR1Z5UFd4bFlYSnVhVzVuWTJ4dmRXUW1abWxzWlQxbFpIVmZabTl5ZFcwaU93PT1FZFVBZEwzQUU1RDU5RTEzRUNBNTdCMUZBMTg4QTNDQTk4Rjg1OA===3AE5D59E13ECA57B1FA188A3CA98F858==';
			$.post('turnpage.php', {
				router: router
			});

			let sNowUrl = e.currentTarget.getAttribute('href_url');
			location.href = sNowUrl;
		});

		/** html2canvas */
		$('#btn2canvas').click(function(e) {
			$.LoadingOverlay('show');
			$('html').addClass('screenshot');
			html2canvas(document.body).then(function(canvas) { //截圖套件
				//圖片轉Dataurl
				var imagedata = canvas.toDataURL('image/png');
				var imgdata = imagedata.replace(/^data:image\/(png|jpg);base64,/, '');
				var router = `MUMzODNDRDMwQjdDMjk4QUI1MDI5M0FERkVDQjdCMThFZFVBZExjem8wTlRvaVptOXNaR1Z5UFdGemMybG5iazFwYzNOcGIyNG1abWxzWlQxd2NtOWtZbDltWldWa1ltRmphMTlrWVhSaElqcz1FZFVBZEwzQUU1RDU5RTEzRUNBNTdCMUZBMTg4QTNDQTk4Rjg1OA===3AE5D59E13ECA57B1FA188A3CA98F858==`;
				$.ajax({ //圖片存檔在user_feedback
					url: 'turnpage.php',
					data: {
						'router': router,
						'imgdata': imgdata
					},
					type: 'post',
					success: function(response) {
						var url = 'QAfeedback.php?imgpath=' + response; //回傳圖片網址
						openIframeModal('fas fa-flag', '問題回報', url); //打開問題回報網址
						$.LoadingOverlay('hide');
					}
				});
			});
		});

		// venobox
		if ($.fn.venobox) {
			$('.venobox').venobox({
				numeratio: true,
				infinigall: true,
				border: '0px',
			});
			$('.venoboxinline').venobox({
				framewidth: 'auto',
				frameheight: 'auto',
				border: '20px',
				titleattr: 'data-title',
				framewidth: '100%',
			});
			$('.venoboxframe').venobox({
				border: '6px'
			});
		}

		//問題回報分頁套件
		function openIframeModal(icon, title, url) {
			$('#dialogModal').iziModal({
				title: title,
				icon: icon,
				bodyOverflow: true,
				openFullscreen: true, //內容超過一頁建議用全螢幕，要不然過長會無法滾動
				padding: 5, //一定要加，不然會跑版
				iframe: true,
				iframeURL: url,
				zindex: 10000,
				onOpened: function() {},
				onOpening: function() {
					$('#qreport').hide();
				},
				onClosing: function() {
					$('#qreport').show();
				},
				onClosed: function() {
					$('#dialogModal').iziModal('destroy');
					$('html').removeClass('screenshot');
				},
			}).iziModal('open');
			$('.iziModal-iframe').on('load', function() {
				$('.iziModal-wrap').scrollTop(0); //讀取後滾到最上面
			});
		}

		// 排序
		function sortBySemeObjectKey(obj) {
			return Object.keys(obj).map(key => Number(key)).sort(function(a, b) {
				return b - a
			}).reduce(function(result, key) {
				result.push({
					semeNum: key,
					semeName: obj[key]
				});
				return result;
			}, []);
		}

		// menu開關
		$(document).on('click', '.menubtn, .menubtn2', function() {
			if ($('main').hasClass('hidemenu')) {
				$('main').addClass('showmenu').removeClass('hidemenu');
			} else if ($('main').hasClass('showmenu')) {
				$('main').addClass('hidemenu').removeClass('showmenu');
			} else {
				if ($(window).width() > 1023) {
					// 大螢幕預設顯示>無
					$('main').addClass('hidemenu').removeClass('showmenu');
				} else if ($(window).width() <= 1023) {
					// 大螢幕預設無>顯示
					$('main').addClass('showmenu').removeClass('hidemenu');
				}
			}
			$('.menubtn2 i').toggleClass('menubtn2_icon');
		});

		$('.navList a').each(function() {
			var bActive = false;
			if ('modules_new.php' + decodeURI(window.location.search) === $(this).attr('href')) {
				$('li.active').removeClass('active');
				localStorage.setItem('tmp_title', $(this).attr('title')); // 暫存給內頁使用
				bActive = true;
			} else if ($(this).attr('title') === localStorage.getItem('tmp_title')) {
				bActive = true;
			}

			if (bActive) {
				$(this).parentsUntil('ul').last().addClass('active');
				var iPosition = $('.navList').scrollTop() + $('li.active').offset().top - ($('.personalInfo').height() + $('header').height());
				$('.navList').scrollTop(iPosition);
			}
		});
		$(function() {
			if (typeof $.fn.modal === 'function') {
				$.fn.bootstrapBtn = $.fn.button.noConflict();
		    }
		});

		if ($('#robotBtn').length != 0 && new URLSearchParams(window.location.href).get("file") != 'conversational_robot') {
				// if ($('#robotBtn').length == 0 && new URLSearchParams(window.location.href).get("file") != 'conversational_robot') {
				// if ($('#robotBtn').length == 0) {
				// $('main > section').append('<div class="btn btnBorder btnCircle robotBtn" id="robotBtn"></div>');
				var offsetX = 0;
				var offsetY = 0;
				var isDragging = false;
				var robotBtn = document.getElementById('robotBtn');
				var hammertime = new Hammer(robotBtn);
				// 定義拖曳手勢
				hammertime.add(new Hammer.Pan({
					threshold: 0,
					pointers: 0
				}));

				// 定義點擊手勢
				hammertime.add(new Hammer.Tap());

				// 設定拖曳手勢在點擊時失效
				hammertime.get('pan').requireFailure('tap');


				hammertime.on('panstart', function(e) {
					robotBtn.style.pointerEvents = 'none';
					offsetX = e.target.offsetLeft - e.center.x;
					offsetY = e.target.offsetTop - e.center.y;
				});

				hammertime.on('pan', function(e) {
					var newX = e.center.x + offsetX;
					var newY = e.center.y + offsetY;
					robotBtn.style.left = newX + 'px';
					robotBtn.style.top = newY + 'px';
				});

				hammertime.on('panend', function(e) {
					robotBtn.style.pointerEvents = 'auto';
				});


				robotBtn.addEventListener('click', function(e) {
					// if (!$(this).hasClass('disableBtn')) {
						e.preventDefault();
						$(this).hide();

						var sRobotWidth;
						if (isMobileDevice()) {
							sRobotWidth = screen.width;
							sRobotheight = screen.height * 0.6;

						} else {
							sRobotWidth = screen.width / 2;
							sRobotheight = screen.height * 0.7;
						}

						$(".chatWrap").dialog({
							title: '通用型學習夥伴',
							height: sRobotheight,
							width: sRobotWidth,
							position: {
								my: "right bottom",
								at: "right bottom",
								of: window
							},
							close: function(event, ui) {
								$('#robotBtn').show();
							}
						});
						dialogInitialized = true;
					// }
				});
		}

    </script>
    <div id="dialogModal"></div><!-- 問題回報 -->
</body>

</html>